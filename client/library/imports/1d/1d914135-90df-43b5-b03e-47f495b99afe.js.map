{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\home\\prefab/assets\\script\\home\\prefab\\homeItemInfo.js"],"names":["cc","Class","extends","Component","properties","infoFrame","default","type","Node","tooltip","bg","nameLab","Label","infoLab","buttonPrefab","Prefab","onLoad","node","on","init","start","infoTouch","bgTouch","_touchListener","setSwallowTouches","_isSwallow","event","systemEvent","emit","stopPropagation","data","btnPos","v2","itemConf","global","configConf","string","button","buttonLen","num","key","btn","instantiate","parent","setPosition"],"mappings":"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","file":"homeItemInfo.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\home\\prefab","sourcesContent":["import global from './../../global/global';\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        infoFrame:{\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '框'\r\n        },\r\n        bg:{\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '背景'\r\n        },\r\n        nameLab:{\r\n            default: null,\r\n            type: cc.Label,\r\n            tooltip: '名称'\r\n        },\r\n        infoLab:{\r\n            default: null,\r\n            type: cc.Label,\r\n            tooltip: '信息'\r\n        },\r\n        buttonPrefab:{\r\n            default: null,\r\n            type: cc.Prefab,\r\n            tooltip: '按钮'\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.node.on('init',this.init,this);\r\n    },\r\n\r\n    start () {\r\n        this.infoFrame.on('touchstart',this.infoTouch,this);\r\n\r\n        this.bg.on('touchstart',this.bgTouch,this);\r\n        if (this.bg._touchListener) {\r\n            this.bg._touchListener.setSwallowTouches(this._isSwallow);\r\n        }\r\n    },\r\n\r\n    bgTouch(event)\r\n    {\r\n        cc.systemEvent.emit('fadeInfo',{});\r\n    },\r\n\r\n    infoTouch(event){\r\n        cc.systemEvent.emit('fadeInfo',{});\r\n        event.stopPropagation();\r\n    },\r\n\r\n    init(data)\r\n    {\r\n        var btnPos = {1:[cc.v2(162,-116)],2:[cc.v2(81,-116),cc.v2(223,-116)]};\r\n        var itemConf = global.configConf['item'][data['item_id']];\r\n        this.nameLab.string = itemConf['name'];\r\n        this.infoLab.string = itemConf['info'];\r\n        var button = {};\r\n        var buttonLen = 0\r\n        if(itemConf['use'])\r\n        {\r\n            button['use'] = itemConf['use'];\r\n            buttonLen++;\r\n        }\r\n\r\n        if(itemConf['cook'])\r\n        {\r\n            button['cook'] = itemConf['cook'];\r\n            buttonLen++;\r\n        }\r\n\r\n        if(itemConf['eat'])\r\n        {\r\n            button['eat'] = itemConf['eat'];\r\n            buttonLen++;\r\n        }\r\n\r\n        if(itemConf['sale'])\r\n        {\r\n            button['sale'] = itemConf['sale'];\r\n            buttonLen++;\r\n        }\r\n\r\n        var num = 0;\r\n        for(var key in button)\r\n        {\r\n            var btn = cc.instantiate(this.buttonPrefab);\r\n            btn.parent = this.infoFrame;\r\n            btn.setPosition(btnPos[buttonLen][num]);\r\n            btn.emit('init',{'type':key,'id':data['id']});\r\n            num++;\r\n        }\r\n        \r\n    }\r\n\r\n    // update (dt) {},\r\n});\r\n"]}