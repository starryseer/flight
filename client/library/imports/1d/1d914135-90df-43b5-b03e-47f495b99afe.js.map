{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\home\\prefab/assets\\script\\home\\prefab\\homeItemInfo.js"],"names":["cc","Class","extends","Component","properties","infoFrame","default","type","Node","tooltip","bg","nameLab","Label","infoLab","fatigue","fatigueLab","buttonPrefab","Prefab","onLoad","node","on","init","start","infoTouch","bgTouch","_touchListener","setSwallowTouches","_isSwallow","event","systemEvent","emit","stopPropagation","data","btnPos","v2","itemConf","global","configConf","string","button","buttonLen","active","num","key","btn","instantiate","parent","setPosition"],"mappings":";;;;;;AAAA;;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,mBAAU;AACNC,qBAAS,IADH;AAENC,kBAAMP,GAAGQ,IAFH;AAGNC,qBAAS;AAHH,SADF;AAMRC,YAAG;AACCJ,qBAAS,IADV;AAECC,kBAAMP,GAAGQ,IAFV;AAGCC,qBAAS;AAHV,SANK;AAWRE,iBAAQ;AACJL,qBAAS,IADL;AAEJC,kBAAMP,GAAGY,KAFL;AAGJH,qBAAS;AAHL,SAXA;AAgBRI,iBAAQ;AACJP,qBAAS,IADL;AAEJC,kBAAMP,GAAGY,KAFL;AAGJH,qBAAS;AAHL,SAhBA;AAqBRK,iBAAQ;AACJR,qBAAS,IADL;AAEJC,kBAAMP,GAAGQ,IAFL;AAGJC,qBAAS;AAHL,SArBA;AA0BRM,oBAAW;AACPT,qBAAS,IADF;AAEPC,kBAAMP,GAAGY,KAFF;AAGPH,qBAAS;AAHF,SA1BH;AA+BRO,sBAAa;AACTV,qBAAS,IADA;AAETC,kBAAMP,GAAGiB,MAFA;AAGTR,qBAAS;AAHA;AA/BL,KAHP;;AAyCL;;AAEAS,UA3CK,oBA2CK;AACN,aAAKC,IAAL,CAAUC,EAAV,CAAa,MAAb,EAAoB,KAAKC,IAAzB,EAA8B,IAA9B;AACH,KA7CI;AA+CLC,SA/CK,mBA+CI;AACL,aAAKjB,SAAL,CAAee,EAAf,CAAkB,YAAlB,EAA+B,KAAKG,SAApC,EAA8C,IAA9C;;AAEA,aAAKb,EAAL,CAAQU,EAAR,CAAW,YAAX,EAAwB,KAAKI,OAA7B,EAAqC,IAArC;AACA,YAAI,KAAKd,EAAL,CAAQe,cAAZ,EAA4B;AACxB,iBAAKf,EAAL,CAAQe,cAAR,CAAuBC,iBAAvB,CAAyC,KAAKC,UAA9C;AACH;AACJ,KAtDI;AAwDLH,WAxDK,mBAwDGI,KAxDH,EAyDL;AACI5B,WAAG6B,WAAH,CAAeC,IAAf,CAAoB,UAApB,EAA+B,EAA/B;AACH,KA3DI;AA6DLP,aA7DK,qBA6DKK,KA7DL,EA6DW;AACZ5B,WAAG6B,WAAH,CAAeC,IAAf,CAAoB,UAApB,EAA+B,EAA/B;AACAF,cAAMG,eAAN;AACH,KAhEI;AAkELV,QAlEK,gBAkEAW,IAlEA,EAmEL;AACI,YAAIC,SAAS,EAAC,GAAE,CAACjC,GAAGkC,EAAH,CAAM,GAAN,EAAU,CAAC,GAAX,CAAD,CAAH,EAAqB,GAAE,CAAClC,GAAGkC,EAAH,CAAM,EAAN,EAAS,CAAC,GAAV,CAAD,EAAgBlC,GAAGkC,EAAH,CAAM,GAAN,EAAU,CAAC,GAAX,CAAhB,CAAvB,EAAb;AACA,YAAIC,WAAWC,iBAAOC,UAAP,CAAkB,MAAlB,EAA0BL,KAAK,SAAL,CAA1B,CAAf;AACA,aAAKrB,OAAL,CAAa2B,MAAb,GAAsBH,SAAS,MAAT,CAAtB;AACA,aAAKtB,OAAL,CAAayB,MAAb,GAAsBH,SAAS,MAAT,CAAtB;AACA,YAAII,SAAS,EAAb;AACA,YAAIC,YAAY,CAAhB;AACA,YAAGL,SAAS,KAAT,CAAH,EACA;AACII,mBAAO,KAAP,IAAgBJ,SAAS,KAAT,CAAhB;AACAK;AACH;;AAED,YAAGL,SAAS,MAAT,CAAH,EACA;AACII,mBAAO,MAAP,IAAiBJ,SAAS,MAAT,CAAjB;AACAK;AACH;;AAED,YAAGL,SAAS,KAAT,CAAH,EACA;AACII,mBAAO,KAAP,IAAgBJ,SAAS,KAAT,CAAhB;AACAK;AACH;;AAED,YAAGL,SAAS,MAAT,CAAH,EACA;AACII,mBAAO,MAAP,IAAiBJ,SAAS,MAAT,CAAjB;AACAK;AACH;;AAED,YAAGL,SAAS,UAAT,KAAwB,MAA3B,EACA;AACI,iBAAKrB,OAAL,CAAa2B,MAAb,GAAsB,KAAtB;AACH,SAHD,MAKA;AACI,iBAAK1B,UAAL,CAAgBuB,MAAhB,GAAyB,MAAIH,SAAS,KAAT,EAAgB,CAAhB,CAA7B;AACH;;AAGD,YAAIO,MAAM,CAAV;AACA,aAAI,IAAIC,GAAR,IAAeJ,MAAf,EACA;AACI,gBAAIK,MAAM5C,GAAG6C,WAAH,CAAe,KAAK7B,YAApB,CAAV;AACA4B,gBAAIE,MAAJ,GAAa,KAAKzC,SAAlB;AACAuC,gBAAIG,WAAJ,CAAgBd,OAAOO,SAAP,EAAkBE,GAAlB,CAAhB;AACAE,gBAAId,IAAJ,CAAS,MAAT,EAAgB,EAAC,QAAOa,GAAR,EAAY,MAAKX,KAAK,IAAL,CAAjB,EAAhB;AACAU;AACH;AAEJ;;AAED;;AAxHK,CAAT","file":"homeItemInfo.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\home\\prefab","sourcesContent":["import global from './../../global/global';\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        infoFrame:{\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '框'\r\n        },\r\n        bg:{\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '背景'\r\n        },\r\n        nameLab:{\r\n            default: null,\r\n            type: cc.Label,\r\n            tooltip: '名称'\r\n        },\r\n        infoLab:{\r\n            default: null,\r\n            type: cc.Label,\r\n            tooltip: '信息'\r\n        },\r\n        fatigue:{\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '疲劳'\r\n        },\r\n        fatigueLab:{\r\n            default: null,\r\n            type: cc.Label,\r\n            tooltip: '疲劳值'\r\n        },\r\n        buttonPrefab:{\r\n            default: null,\r\n            type: cc.Prefab,\r\n            tooltip: '按钮'\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.node.on('init',this.init,this);\r\n    },\r\n\r\n    start () {\r\n        this.infoFrame.on('touchstart',this.infoTouch,this);\r\n\r\n        this.bg.on('touchstart',this.bgTouch,this);\r\n        if (this.bg._touchListener) {\r\n            this.bg._touchListener.setSwallowTouches(this._isSwallow);\r\n        }\r\n    },\r\n\r\n    bgTouch(event)\r\n    {\r\n        cc.systemEvent.emit('fadeInfo',{});\r\n    },\r\n\r\n    infoTouch(event){\r\n        cc.systemEvent.emit('fadeInfo',{});\r\n        event.stopPropagation();\r\n    },\r\n\r\n    init(data)\r\n    {\r\n        var btnPos = {1:[cc.v2(162,-116)],2:[cc.v2(81,-116),cc.v2(223,-116)]};\r\n        var itemConf = global.configConf['item'][data['item_id']];\r\n        this.nameLab.string = itemConf['name'];\r\n        this.infoLab.string = itemConf['info'];\r\n        var button = {};\r\n        var buttonLen = 0\r\n        if(itemConf['use'])\r\n        {\r\n            button['use'] = itemConf['use'];\r\n            buttonLen++;\r\n        }\r\n\r\n        if(itemConf['cook'])\r\n        {\r\n            button['cook'] = itemConf['cook'];\r\n            buttonLen++;\r\n        }\r\n\r\n        if(itemConf['eat'])\r\n        {\r\n            button['eat'] = itemConf['eat'];\r\n            buttonLen++;\r\n        }\r\n\r\n        if(itemConf['sale'])\r\n        {\r\n            button['sale'] = itemConf['sale'];\r\n            buttonLen++;\r\n        }\r\n\r\n        if(itemConf['showType'] != 'food')\r\n        {\r\n            this.fatigue.active = false;\r\n        }\r\n        else\r\n        {\r\n            this.fatigueLab.string = \"+\"+itemConf['num'][0];\r\n        }\r\n        \r\n\r\n        var num = 0;\r\n        for(var key in button)\r\n        {\r\n            var btn = cc.instantiate(this.buttonPrefab);\r\n            btn.parent = this.infoFrame;\r\n            btn.setPosition(btnPos[buttonLen][num]);\r\n            btn.emit('init',{'type':key,'id':data['id']});\r\n            num++;\r\n        }\r\n        \r\n    }\r\n\r\n    // update (dt) {},\r\n});\r\n"]}