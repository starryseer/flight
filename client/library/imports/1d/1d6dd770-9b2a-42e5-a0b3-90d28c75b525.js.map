{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\shop/assets\\script\\shop\\getFrame.js"],"names":["cc","Class","extends","Component","properties","bg","default","type","Node","tooltip","layout","item","Prefab","closeBtn","onLoad","global","FitHelper","onEnable","systemEvent","on","show","onDestroy","off","data","active","node","setPosition","v2","removeAllChildren","index","instantiate","parent","emit","opacity","length","runAction","sequence","delayTime","fadeIn","callFunc","fade","onCloseClick","target"],"mappings":";;;;;;AAAA;;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,YAAI;AACAC,qBAAS,IADT;AAEAC,kBAAMP,GAAGQ,IAFT;AAGAC,qBAAS;AAHT,SADI;AAMRC,gBAAO;AACHJ,qBAAS,IADN;AAEHC,kBAAMP,GAAGQ,IAFN;AAGHC,qBAAS;AAHN,SANC;AAWRE,cAAK;AACDL,qBAAS,IADR;AAEDC,kBAAMP,GAAGY,MAFR;AAGDH,qBAAS;AAHR,SAXG;AAgBRI,kBAAS;AACLP,qBAAS,IADJ;AAELC,kBAAMP,GAAGQ,IAFJ;AAGLC,qBAAS;AAHJ;AAhBD,KAHP;;AA0BL;;AAEAK,UA5BK,oBA4BK;AACNC,yBAAOC,SAAP,CAAiBC,QAAjB,CAA0B,KAAKZ,EAA/B;AACAL,WAAGkB,WAAH,CAAeC,EAAf,CAAkB,SAAlB,EAA4B,KAAKC,IAAjC,EAAsC,IAAtC;AACH,KA/BI;AAiCLC,aAjCK,uBAiCM;AACPrB,WAAGkB,WAAH,CAAeI,GAAf,CAAmB,SAAnB,EAA6B,KAAKF,IAAlC,EAAuC,IAAvC;AACH,KAnCI;AAqCLA,QArCK,gBAqCAG,IArCA,EAqCK;AAAA;;AACN,aAAKV,QAAL,CAAcW,MAAd,GAAuB,KAAvB;AACA,aAAKC,IAAL,CAAUC,WAAV,CAAsB1B,GAAG2B,EAAH,CAAM,CAAN,EAAQ,CAAR,CAAtB;AACA,aAAKjB,MAAL,CAAYkB,iBAAZ;AACA,aAAI,IAAIC,KAAR,IAAiBN,IAAjB,EACA;AACI,gBAAIZ,OAAOX,GAAG8B,WAAH,CAAe,KAAKnB,IAApB,CAAX;AACAA,iBAAKoB,MAAL,GAAc,KAAKrB,MAAnB;AACAC,iBAAKqB,IAAL,CAAU,MAAV,EAAiBT,KAAKM,KAAL,CAAjB;AACAlB,iBAAKsB,OAAL,GAAe,CAAf;AACA,gBAAGJ,SAAUN,KAAKW,MAAL,GAAY,CAAzB,EACIvB,KAAKwB,SAAL,CAAenC,GAAGoC,QAAH,CAAYpC,GAAGqC,SAAH,CAAaR,QAAM,EAAnB,CAAZ,EAAmC7B,GAAGsC,MAAH,CAAU,GAAV,CAAnC,EAAkDtC,GAAGuC,QAAH,CAAY,YAAI;AAC7E,sBAAK1B,QAAL,CAAcW,MAAd,GAAuB,IAAvB;AACH,aAFgE,CAAlD,CAAf,EADJ,KAKIb,KAAKwB,SAAL,CAAenC,GAAGoC,QAAH,CAAYpC,GAAGqC,SAAH,CAAaR,QAAM,EAAnB,CAAZ,EAAmC7B,GAAGsC,MAAH,CAAU,GAAV,CAAnC,CAAf;AACP;AACDtC,WAAGkB,WAAH,CAAec,IAAf,CAAoB,UAApB,EAA+B,EAA/B;AACH,KAvDI;AAyDLQ,QAzDK,kBAyDC;AACF,aAAKf,IAAL,CAAUC,WAAV,CAAsB1B,GAAG2B,EAAH,CAAM,IAAN,EAAW,CAAX,CAAtB;AACH,KA3DI;AA6DLc,gBA7DK,wBA6DQC,MA7DR,EA6DenB,IA7Df,EA8DL;AACI,aAAKiB,IAAL;AACH;AAhEI;;AAkEL;AAlEJ","file":"getFrame.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\shop","sourcesContent":["import global from './../global/global';\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        bg: {\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '背景'\r\n        },\r\n        layout:{\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '显示框'\r\n        },\r\n        item:{\r\n            default: null,\r\n            type: cc.Prefab,\r\n            tooltip: '道具预制体'\r\n        },\r\n        closeBtn:{\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '关闭按钮'\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        global.FitHelper.onEnable(this.bg);\r\n        cc.systemEvent.on('getShow',this.show,this);\r\n    },\r\n\r\n    onDestroy(){\r\n        cc.systemEvent.off('getShow',this.show,this);\r\n    },\r\n\r\n    show(data){\r\n        this.closeBtn.active = false;\r\n        this.node.setPosition(cc.v2(0,0));\r\n        this.layout.removeAllChildren();\r\n        for(var index in data)\r\n        {\r\n            var item = cc.instantiate(this.item);\r\n            item.parent = this.layout;\r\n            item.emit('init',data[index]);\r\n            item.opacity = 0;\r\n            if(index == (data.length-1))\r\n                item.runAction(cc.sequence(cc.delayTime(index/10),cc.fadeIn(0.1),cc.callFunc(()=>{\r\n                    this.closeBtn.active = true;\r\n                })));\r\n            else\r\n                item.runAction(cc.sequence(cc.delayTime(index/10),cc.fadeIn(0.1)));\r\n        }\r\n        cc.systemEvent.emit('mainInit',{});\r\n    },\r\n\r\n    fade(){\r\n        this.node.setPosition(cc.v2(2000,0));\r\n    },\r\n\r\n    onCloseClick(target,data)\r\n    {\r\n        this.fade();\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}