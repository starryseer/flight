{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\home\\bag/assets\\script\\home\\bag\\bagFrame.js"],"names":["cc","Class","extends","Component","properties","matter","default","type","Node","tooltip","food","item","itemParent","infoPrefab","Prefab","confirmFrame","saleFrame","onLoad","global","FitHelper","fitUnit","node","start","on","init","systemEvent","showInfo","fadeInfo","showDealFrame","showConfirmFrame","emit","removeAllChildren","animate","onDestroy","off","setPosition","v2","runAction","moveTo","data","info","instantiate","parent","x","y","gold","frame","onButtonClick","target","parseInt"],"mappings":";;;;;;AAAA;;;;;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAQ;AACJC,qBAAS,IADL;AAEJC,kBAAMP,GAAGQ,IAFL;AAGJC,qBAAS;AAHL,SADA;AAMRC,cAAM;AACFJ,qBAAS,IADP;AAEFC,kBAAMP,GAAGQ,IAFP;AAGFC,qBAAS;AAHP,SANE;AAWRE,cAAM;AACFL,qBAAS,IADP;AAEFC,kBAAMP,GAAGQ,IAFP;AAGFC,qBAAS;AAHP,SAXE;AAgBRG,oBAAY;AACRN,qBAAS,IADD;AAERC,kBAAMP,GAAGQ,IAFD;AAGRC,qBAAS;AAHD,SAhBJ;AAqBRI,oBAAY;AACRP,qBAAS,IADD;AAERC,kBAAMP,GAAGc,MAFD;AAGRL,qBAAS;AAHD,SArBJ;AA0BRM,sBAAa;AACTT,qBAAS,IADA;AAETC,kBAAMP,GAAGc,MAFA;AAGTL,qBAAS;AAHA,SA1BL;AA+BRO,mBAAU;AACNV,qBAAS,IADH;AAENC,kBAAMP,GAAGc,MAFH;AAGNL,qBAAS;AAHH;AA/BF,KAHP;;AAyCL;;AAEAQ,UA3CK,oBA2CK;AACNC,yBAAOC,SAAP,CAAiBC,OAAjB,CAAyB,KAAKC,IAA9B;AACH,KA7CI;AA+CLC,SA/CK,mBA+CI;AACL,aAAKD,IAAL,CAAUE,EAAV,CAAa,MAAb,EAAoB,KAAKC,IAAzB,EAA8B,IAA9B;AACAxB,WAAGyB,WAAH,CAAeF,EAAf,CAAkB,UAAlB,EAA6B,KAAKG,QAAlC,EAA2C,IAA3C;AACA1B,WAAGyB,WAAH,CAAeF,EAAf,CAAkB,UAAlB,EAA6B,KAAKI,QAAlC,EAA2C,IAA3C;AACA3B,WAAGyB,WAAH,CAAeF,EAAf,CAAkB,eAAlB,EAAkC,KAAKK,aAAvC,EAAqD,IAArD;AACA5B,WAAGyB,WAAH,CAAeF,EAAf,CAAkB,kBAAlB,EAAqC,KAAKM,gBAA1C,EAA2D,IAA3D;AACA,aAAKL,IAAL;AACH,KAtDI;AAwDLA,QAxDK,kBAwDC;AACF,aAAKnB,MAAL,CAAYyB,IAAZ,CAAiB,MAAjB,EAAwB,EAAxB;AACA,aAAKpB,IAAL,CAAUoB,IAAV,CAAe,MAAf,EAAsB,EAAtB;AACA,aAAKnB,IAAL,CAAUmB,IAAV,CAAe,MAAf,EAAsB,EAAtB;AACA,aAAKlB,UAAL,CAAgBmB,iBAAhB;AACA,aAAKC,OAAL;AACH,KA9DI;AAgELC,aAhEK,uBAgEM;AACPjC,WAAGyB,WAAH,CAAeS,GAAf,CAAmB,UAAnB,EAA8B,KAAKR,QAAnC,EAA4C,IAA5C;AACA1B,WAAGyB,WAAH,CAAeS,GAAf,CAAmB,UAAnB,EAA8B,KAAKP,QAAnC,EAA4C,IAA5C;AACA3B,WAAGyB,WAAH,CAAeS,GAAf,CAAmB,eAAnB,EAAmC,KAAKN,aAAxC,EAAsD,IAAtD;AACA5B,WAAGyB,WAAH,CAAeS,GAAf,CAAmB,kBAAnB,EAAsC,KAAKL,gBAA3C,EAA4D,IAA5D;AACH,KArEI;AAuELG,WAvEK,qBAuEI;AACL,aAAKX,IAAL,CAAUc,WAAV,CAAsBnC,GAAGoC,EAAH,CAAM,CAAC,GAAP,EAAW,CAAX,CAAtB;AACA,aAAKf,IAAL,CAAUgB,SAAV,CAAoBrC,GAAGsC,MAAH,CAAU,GAAV,EAActC,GAAGoC,EAAH,CAAM,CAAN,EAAQ,CAAR,CAAd,CAApB;AACH,KA1EI;AA4ELV,YA5EK,oBA4EIa,IA5EJ,EA4ES;AACV,aAAKZ,QAAL;AACA,YAAIa,OAAOxC,GAAGyC,WAAH,CAAe,KAAK5B,UAApB,CAAX;AACA2B,aAAKE,MAAL,GAAc,KAAK9B,UAAnB;AACA,YAAG2B,KAAK,KAAL,EAAYI,CAAZ,GAAe,CAAC,GAAnB,EACIJ,KAAK,KAAL,EAAYI,CAAZ,GAAgB,CAAC,GAAjB;;AAEJ,YAAGJ,KAAK,KAAL,EAAYK,CAAZ,GAAe,CAAC,GAAnB,EACIL,KAAK,KAAL,EAAYK,CAAZ,GAAgB,CAAC,GAAjB;;AAEJJ,aAAKL,WAAL,CAAiBI,KAAK,KAAL,CAAjB;AACAC,aAAKV,IAAL,CAAU,MAAV,EAAiBS,IAAjB;AACH,KAxFI;AA0FLZ,YA1FK,sBA0FK;AACN,aAAKf,UAAL,CAAgBmB,iBAAhB;AACH,KA5FI;AA8FLH,iBA9FK,yBA8FSW,IA9FT,EA+FL;AACI,gBAAOA,KAAK,MAAL,CAAP;AAEI,iBAAK,MAAL;AACI,oBAAIvB,YAAYhB,GAAGyC,WAAH,CAAe,KAAKzB,SAApB,CAAhB;AACAA,0BAAU0B,MAAV,GAAmB,KAAK9B,UAAxB;AACAI,0BAAUc,IAAV,CAAe,MAAf,EAAsBS,IAAtB;AACA;AANR;AAQH,KAxGI;AA0GLV,oBA1GK,4BA0GYgB,IA1GZ,EA0GiB;AAClB,YAAIC,QAAQ9C,GAAGyC,WAAH,CAAe,KAAK1B,YAApB,CAAZ;AACA+B,cAAMJ,MAAN,GAAe,KAAK9B,UAApB;AACAkC,cAAMhB,IAAN,CAAW,MAAX,EAAkB,EAAC,QAAOe,IAAR,EAAlB;AACH,KA9GI;AAgHLE,iBAhHK,yBAgHSC,MAhHT,EAgHgBT,IAhHhB,EAgHqB;AACtB,gBAAOU,SAASV,IAAT,CAAP;AACI,iBAAK,CAAL;AACI,qBAAKlC,MAAL,CAAYyB,IAAZ,CAAiB,UAAjB,EAA4B,EAA5B;AACA,qBAAKpB,IAAL,CAAUoB,IAAV,CAAe,MAAf,EAAsB,EAAtB;AACA,qBAAKnB,IAAL,CAAUmB,IAAV,CAAe,MAAf,EAAsB,EAAtB;AACA;AACJ,iBAAK,CAAL;AACI,qBAAKzB,MAAL,CAAYyB,IAAZ,CAAiB,MAAjB,EAAwB,EAAxB;AACA,qBAAKpB,IAAL,CAAUoB,IAAV,CAAe,UAAf,EAA0B,EAA1B;AACA,qBAAKnB,IAAL,CAAUmB,IAAV,CAAe,MAAf,EAAsB,EAAtB;AACA;AACJ,iBAAK,CAAL;AACI,qBAAKzB,MAAL,CAAYyB,IAAZ,CAAiB,MAAjB,EAAwB,EAAxB;AACA,qBAAKpB,IAAL,CAAUoB,IAAV,CAAe,MAAf,EAAsB,EAAtB;AACA,qBAAKnB,IAAL,CAAUmB,IAAV,CAAe,UAAf,EAA0B,EAA1B;AACA;AAfR;AAiBH;AAlII;;AAwIL;AAxIJ","file":"bagFrame.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\home\\bag","sourcesContent":["import global from \"../../global/global\";\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        matter: {\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '食材框'\r\n        }, \r\n        food: {\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '食物框'\r\n        }, \r\n        item: {\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '道具框'\r\n        }, \r\n        itemParent: {\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '信息框'\r\n        },\r\n        infoPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n            tooltip: '信息框'\r\n        },\r\n        confirmFrame:{\r\n            default: null,\r\n            type: cc.Prefab,\r\n            tooltip: '成功回调框'\r\n        },\r\n        saleFrame:{\r\n            default: null,\r\n            type: cc.Prefab,\r\n            tooltip: '出售物品框'\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        global.FitHelper.fitUnit(this.node);\r\n    },\r\n\r\n    start () {\r\n        this.node.on('init',this.init,this);\r\n        cc.systemEvent.on('showInfo',this.showInfo,this);\r\n        cc.systemEvent.on('fadeInfo',this.fadeInfo,this);\r\n        cc.systemEvent.on('showDealFrame',this.showDealFrame,this);\r\n        cc.systemEvent.on('showConfirmFrame',this.showConfirmFrame,this);\r\n        this.init();\r\n    },\r\n\r\n    init(){\r\n        this.matter.emit('init',{});\r\n        this.food.emit('init',{});\r\n        this.item.emit('init',{});\r\n        this.itemParent.removeAllChildren();\r\n        this.animate();\r\n    },\r\n\r\n    onDestroy(){\r\n        cc.systemEvent.off('showInfo',this.showInfo,this);\r\n        cc.systemEvent.off('fadeInfo',this.fadeInfo,this);\r\n        cc.systemEvent.off('showDealFrame',this.showDealFrame,this);\r\n        cc.systemEvent.off('showConfirmFrame',this.showConfirmFrame,this);\r\n    },\r\n\r\n    animate(){\r\n        this.node.setPosition(cc.v2(-650,0));\r\n        this.node.runAction(cc.moveTo(0.5,cc.v2(0,0)));\r\n    },\r\n\r\n    showInfo(data){\r\n        this.fadeInfo();\r\n        var info = cc.instantiate(this.infoPrefab);\r\n        info.parent = this.itemParent;\r\n        if(data['pos'].x >-100)\r\n            data['pos'].x = -100;\r\n        \r\n        if(data['pos'].y <-130)\r\n            data['pos'].y = -130;   \r\n        \r\n        info.setPosition(data['pos']);\r\n        info.emit('init',data);\r\n    },\r\n\r\n    fadeInfo(){\r\n        this.itemParent.removeAllChildren();\r\n    },\r\n\r\n    showDealFrame(data)\r\n    {\r\n        switch(data['type'])\r\n        {\r\n            case 'sale':\r\n                var saleFrame = cc.instantiate(this.saleFrame);\r\n                saleFrame.parent = this.itemParent;\r\n                saleFrame.emit('init',data);\r\n                break;\r\n        }\r\n    },\r\n\r\n    showConfirmFrame(gold){\r\n        var frame = cc.instantiate(this.confirmFrame);\r\n        frame.parent = this.itemParent;\r\n        frame.emit('init',{'gold':gold});\r\n    },\r\n\r\n    onButtonClick(target,data){\r\n        switch(parseInt(data)){\r\n            case 1:\r\n                this.matter.emit('btnTouch',{});\r\n                this.food.emit('fade',{});\r\n                this.item.emit('fade',{});\r\n                break;\r\n            case 2:\r\n                this.matter.emit('fade',{});\r\n                this.food.emit('btnTouch',{});\r\n                this.item.emit('fade',{});\r\n                break; \r\n            case 3:\r\n                this.matter.emit('fade',{});\r\n                this.food.emit('fade',{});\r\n                this.item.emit('btnTouch',{});\r\n                break;          \r\n        }\r\n    },\r\n\r\n    \r\n\r\n\r\n\r\n    // update (dt) {},\r\n});\r\n"]}