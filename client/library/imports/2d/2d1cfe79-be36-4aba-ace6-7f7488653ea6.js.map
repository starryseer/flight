{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\home\\bag/assets\\script\\home\\bag\\bagFrame.js"],"names":["cc","Class","extends","Component","properties","matter","default","type","Node","tooltip","food","item","itemParent","infoPrefab","Prefab","saleConfirmFrame","saleFrame","useFrame","useConfirmFrame","onLoad","global","FitHelper","fitUnit","node","start","on","init","systemEvent","showInfo","fadeInfo","showDealFrame","saleConfirm","useConfirm","emit","removeAllChildren","animate","onDestroy","off","setPosition","v2","runAction","moveTo","data","info","instantiate","parent","x","y","director","loadScene","gold","frame","onButtonClick","target","parseInt"],"mappings":"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","file":"bagFrame.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\home\\bag","sourcesContent":["import global from \"../../global/global\";\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        matter: {\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '食材框'\r\n        }, \r\n        food: {\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '食物框'\r\n        }, \r\n        item: {\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '道具框'\r\n        }, \r\n        itemParent: {\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '信息框'\r\n        },\r\n        infoPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n            tooltip: '信息框'\r\n        },\r\n        saleConfirmFrame:{\r\n            default: null,\r\n            type: cc.Prefab,\r\n            tooltip: '成功回调框'\r\n        },\r\n        saleFrame:{\r\n            default: null,\r\n            type: cc.Prefab,\r\n            tooltip: '出售物品框'\r\n        },\r\n        useFrame:{\r\n            default: null,\r\n            type: cc.Prefab,\r\n            tooltip: '使用物品框'\r\n        },\r\n        useConfirmFrame:{\r\n            default: null,\r\n            type: cc.Prefab,\r\n            tooltip: '使用物品框'\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        global.FitHelper.fitUnit(this.node);\r\n    },\r\n\r\n    start () {\r\n        this.node.on('init',this.init,this);\r\n        cc.systemEvent.on('showInfo',this.showInfo,this);\r\n        cc.systemEvent.on('fadeInfo',this.fadeInfo,this);\r\n        cc.systemEvent.on('showDealFrame',this.showDealFrame,this);\r\n        cc.systemEvent.on('saleConfirm',this.saleConfirm,this);\r\n        cc.systemEvent.on('useConfirm',this.useConfirm,this);\r\n        this.init();\r\n    },\r\n\r\n    init(){\r\n        this.matter.emit('init',{});\r\n        this.food.emit('init',{});\r\n        this.item.emit('init',{});\r\n        this.itemParent.removeAllChildren();\r\n        this.animate();\r\n    },\r\n\r\n    onDestroy(){\r\n        cc.systemEvent.off('showInfo',this.showInfo,this);\r\n        cc.systemEvent.off('fadeInfo',this.fadeInfo,this);\r\n        cc.systemEvent.off('showDealFrame',this.showDealFrame,this);\r\n        cc.systemEvent.off('saleConfirm',this.saleConfirm,this);\r\n        cc.systemEvent.off('useConfirm',this.useConfirm,this);\r\n    },\r\n\r\n    animate(){\r\n        this.node.setPosition(cc.v2(-650,0));\r\n        this.node.runAction(cc.moveTo(0.5,cc.v2(0,0)));\r\n    },\r\n\r\n    showInfo(data){\r\n        this.fadeInfo();\r\n        var info = cc.instantiate(this.infoPrefab);\r\n        info.parent = this.itemParent;\r\n        if(data['pos'].x >-100)\r\n            data['pos'].x = -100;\r\n        \r\n        if(data['pos'].y <-130)\r\n            data['pos'].y = -130;   \r\n        \r\n        info.setPosition(data['pos']);\r\n        info.emit('init',data);\r\n    },\r\n\r\n    fadeInfo(){\r\n        this.itemParent.removeAllChildren();\r\n    },\r\n\r\n    showDealFrame(data)\r\n    {\r\n        switch(data['type'])\r\n        {\r\n            case 'sale':\r\n                var saleFrame = cc.instantiate(this.saleFrame);\r\n                saleFrame.parent = this.itemParent;\r\n                saleFrame.emit('init',data);\r\n                break;\r\n            case 'use':\r\n                var useFrame = cc.instantiate(this.useFrame);\r\n                useFrame.parent = this.itemParent;\r\n                useFrame.emit('init',data);\r\n                break;\r\n            default:\r\n                cc.director.loadScene('cook');\r\n        }\r\n    },\r\n\r\n    saleConfirm(gold){\r\n        var frame = cc.instantiate(this.saleConfirmFrame);\r\n        frame.parent = this.itemParent;\r\n        frame.emit('init',{'gold':gold});\r\n    },\r\n\r\n    useConfirm(data){\r\n        var frame = cc.instantiate(this.useConfirmFrame);\r\n        frame.parent = this.itemParent;\r\n        frame.emit('init',data);\r\n    },\r\n\r\n    onButtonClick(target,data){\r\n        switch(parseInt(data)){\r\n            case 1:\r\n                this.matter.emit('btnTouch',{});\r\n                this.food.emit('fade',{});\r\n                this.item.emit('fade',{});\r\n                break;\r\n            case 2:\r\n                this.matter.emit('fade',{});\r\n                this.food.emit('btnTouch',{});\r\n                this.item.emit('fade',{});\r\n                break; \r\n            case 3:\r\n                this.matter.emit('fade',{});\r\n                this.food.emit('fade',{});\r\n                this.item.emit('btnTouch',{});\r\n                break;          \r\n        }\r\n    },\r\n\r\n    \r\n\r\n\r\n\r\n    // update (dt) {},\r\n});\r\n"]}