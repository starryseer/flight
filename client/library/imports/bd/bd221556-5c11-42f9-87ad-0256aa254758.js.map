{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\login/assets\\script\\login\\login.js"],"names":["cc","Class","extends","Component","properties","bg","default","type","Node","tooltip","account","EditBox","password","start_btn","onLoad","global","FitHelper","fitFun","start","startClick","string","param","deviceType","plat","udid","loginSDK","HttpHelper","httpPost","urlConf","sdk_login","rsp","code","userData","initUserData","data","user","loginGame","userId","id","token","game_login","clientData","initClientData","client","clientAttrData","initClientAttrData","clientAttr","itemData","initItemData","item","miniGameData","initMiniGameData","miniGame","director","loadScene","update","dt"],"mappings":";;;;;;AAAA;;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,YAAI;AACAC,qBAAS,IADT;AAEAC,kBAAMP,GAAGQ,IAFT;AAGAC,qBAAS;AAHT,SADI;AAMRC,iBAAQ;AACJJ,qBAAS,IADL;AAEJC,kBAAMP,GAAGW,OAFL;AAGJF,qBAAS;AAHL,SANA,EAUJ;AACJG,kBAAU;AACNN,qBAAS,IADH;AAENC,kBAAMP,GAAGW,OAFH;AAGNF,qBAAS;AAHH,SAXF,EAeL;AACHI,mBAAW;AACPP,qBAAS,IADF;AAEPC,kBAAMP,GAAGQ,IAFF;AAGPC,qBAAS;AAHF,SAhBH,CAoBJ;AApBI,KAHP;;AA0BLK,UA1BK,oBA0BK;AACNC,yBAAOC,SAAP,CAAiBC,MAAjB,CAAwB,KAAKZ,EAA7B;AACH,KA5BI;AA8BLa,SA9BK,mBA8BI,CAER,CAhCI;AAkCLC,cAlCK,wBAkCS;AACV,YAAIT,UAAU,KAAKA,OAAL,CAAaU,MAA3B;AACA,YAAIR,WAAW,KAAKA,QAAL,CAAcQ,MAA7B;AACA,YAAIC,QAAQ,EAACX,SAAQA,OAAT,EAAiBE,UAAUA,QAA3B,EAAqCU,YAAY,KAAjD,EAAwDC,MAAM,EAA9D,EAAkEC,MAAM,GAAxE,EAAZ;AACA,aAAKC,QAAL,CAAcJ,KAAd;AACH,KAvCI;AAyCLI,YAzCK,oBAyCIJ,KAzCJ,EA0CL;AAAA;;AACIN,yBAAOW,UAAP,CAAkBC,QAAlB,CAA2BZ,iBAAOa,OAAP,CAAeC,SAA1C,EAAoDR,KAApD,EAA0D,UAACS,GAAD,EAAO;AAC7D,gBAAGA,OAAO,CAAC,CAAX,EACA;AACI;AACH;;AAED,gBAAGA,IAAIC,IAAJ,IAAY,GAAf,EACA;AACIhB,iCAAOiB,QAAP,CAAgBC,YAAhB,CAA6BH,IAAII,IAAJ,CAASC,IAAtC;AACA,sBAAKC,SAAL;AACH,aAJD,MAMA;AACI;AACH;AACJ,SAfD;AAgBH,KA3DI;AA+DLA,aA/DK,uBA+DM;AACP,YAAIf,QAAQ,EAACgB,QAAOtB,iBAAOiB,QAAP,CAAgBM,EAAxB,EAA2BC,OAAMxB,iBAAOiB,QAAP,CAAgBO,KAAjD,EAAZ;AACAxB,yBAAOW,UAAP,CAAkBC,QAAlB,CAA2BZ,iBAAOa,OAAP,CAAeY,UAA1C,EAAqDnB,KAArD,EAA2D,UAACS,GAAD,EAAO;AAC9D,gBAAGA,OAAO,CAAC,CAAX,EACA;AACI;AACH;;AAED,gBAAGA,IAAIC,IAAJ,IAAY,GAAf,EACA;AACIhB,iCAAO0B,UAAP,CAAkBC,cAAlB,CAAiCZ,IAAII,IAAJ,CAASS,MAA1C;AACA5B,iCAAO6B,cAAP,CAAsBC,kBAAtB,CAAyCf,IAAII,IAAJ,CAASY,UAAlD;AACA/B,iCAAOgC,QAAP,CAAgBC,YAAhB,CAA6BlB,IAAII,IAAJ,CAASe,IAAtC;AACAlC,iCAAOmC,YAAP,CAAoBC,gBAApB,CAAqCrB,IAAII,IAAJ,CAASkB,QAA9C;AACApD,mBAAGqD,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACH,aAPD,MASA;AACI;AACH;AACJ,SAlBD;AAoBH,KArFI;AAuFLC,UAvFK,kBAuFGC,EAvFH,EAuFO,CAAE;AAvFT,CAAT","file":"login.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\login","sourcesContent":["import global from \"./../global/global\"\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        bg: {\n            default: null,\n            type: cc.Node,\n            tooltip: '背景'\n        },\n        account:{\n            default: null,\n            type: cc.EditBox,\n            tooltip: '背景'\n        },  // 账号\n        password: {\n            default: null,\n            type: cc.EditBox,\n            tooltip: '背景'\n        }, // 密码\n        start_btn: {\n            default: null,\n            type: cc.Node,\n            tooltip: '背景'\n        },  // 开始按钮\n    },\n\n    onLoad () {\n        global.FitHelper.fitFun(this.bg);\n    },\n\n    start () {\n\n    },\n\n    startClick () {\n        var account = this.account.string;\n        var password = this.password.string;\n        var param = {account:account,password: password ,deviceType: 'ios', plat: 10, udid: 123};\n        this.loginSDK(param);\n    },\n\n    loginSDK(param)\n    {\n        global.HttpHelper.httpPost(global.urlConf.sdk_login,param,(rsp)=>{\n            if(rsp == -1)\n            {\n                return;\n            }\n\n            if(rsp.code == 200)\n            {\n                global.userData.initUserData(rsp.data.user);\n                this.loginGame();\n            }\n            else\n            {\n                return;\n            }\n        });\n    },\n\n\n\n    loginGame(){\n        var param = {userId:global.userData.id,token:global.userData.token};\n        global.HttpHelper.httpPost(global.urlConf.game_login,param,(rsp)=>{\n            if(rsp == -1)\n            {\n                return;\n            }\n\n            if(rsp.code == 200)\n            {\n                global.clientData.initClientData(rsp.data.client);\n                global.clientAttrData.initClientAttrData(rsp.data.clientAttr);\n                global.itemData.initItemData(rsp.data.item);\n                global.miniGameData.initMiniGameData(rsp.data.miniGame);\n                cc.director.loadScene('home');\n            }\n            else\n            {\n                return;\n            }\n        });\n        \n    },\n\n    update (dt) {},\n});\n"]}