{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\login/assets\\script\\login\\login.js"],"names":["cc","Class","extends","Component","properties","bg","default","type","Node","tooltip","account","EditBox","password","start_btn","onLoad","global","FitHelper","fitFun","loadConfig","loader","loadResDir","err","dir","i","length","loadRes","name","trim","error","json","configConf","start","startClick","string","param","deviceType","plat","udid","loginSDK","HttpHelper","httpPost","urlConf","sdk_login","rsp","code","userData","initUserData","data","user","loginGame","userId","id","token","game_login","clientData","initClientData","client","clientAttrData","initClientAttrData","clientAttr","itemData","initItemData","item","miniGameData","initMiniGameData","miniGame","director","loadScene","update","dt"],"mappings":"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","file":"login.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\login","sourcesContent":["import global from \"./../global/global\"\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        bg: {\n            default: null,\n            type: cc.Node,\n            tooltip: '背景'\n        },\n        account:{\n            default: null,\n            type: cc.EditBox,\n            tooltip: '背景'\n        },  // 账号\n        password: {\n            default: null,\n            type: cc.EditBox,\n            tooltip: '背景'\n        }, // 密码\n        start_btn: {\n            default: null,\n            type: cc.Node,\n            tooltip: '背景'\n        },  // 开始按钮\n    },\n\n    onLoad () {\n        global.FitHelper.fitFun(this.bg);\n        this.loadConfig();\n        \n    },\n\n    loadConfig(){\n        cc.loader.loadResDir(\"config\", (err, dir)=> {\n            if(err)\n                return;\n            for(let i=0;i<dir.length;i++)\n            {\n                cc.loader.loadRes('config/' + dir[i].name.trim() + '.json',(error,json)=>{\n                    global.configConf[json.name] = json.json;\n                });\n            } \n        }); \n    },\n\n\n    start () {\n\n    },\n\n    startClick () {\n        var account = this.account.string;\n        var password = this.password.string;\n        var param = {account:account,password: password ,deviceType: 'ios', plat: 10, udid: 123};\n        this.loginSDK(param);\n    },\n\n    loginSDK(param)\n    {\n        global.HttpHelper.httpPost(global.urlConf.sdk_login,param,(rsp)=>{\n            if(rsp == -1)\n            {\n                return;\n            }\n\n            if(rsp.code == 200)\n            {\n                global.userData.initUserData(rsp.data.user);\n                this.loginGame();\n            }\n            else\n            {\n                return;\n            }\n        });\n    },\n\n\n\n    loginGame(){\n        var param = {userId:global.userData.id,token:global.userData.token};\n        global.HttpHelper.httpPost(global.urlConf.game_login,param,(rsp)=>{\n            if(rsp == -1)\n            {\n                return;\n            }\n\n            if(rsp.code == 200)\n            {\n                global.clientData.initClientData(rsp.data.client);\n                global.clientAttrData.initClientAttrData(rsp.data.clientAttr);\n                global.itemData.initItemData(rsp.data.item);\n                global.miniGameData.initMiniGameData(rsp.data.miniGame);\n                cc.director.loadScene('home');\n            }\n            else\n            {\n                return;\n            }\n        });\n        \n    },\n\n    update (dt) {},\n});\n"]}