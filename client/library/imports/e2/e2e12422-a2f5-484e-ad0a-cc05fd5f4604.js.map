{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\home\\player/assets\\script\\home\\player\\playerClick.js"],"names":["cc","Class","extends","Component","properties","infoBg","default","type","Node","tooltip","currentTime","Integer","onLoad","node","on","EventType","TOUCH_START","onTouchStart","TOUCH_END","onTouchEnd","start","global","FitHelper","onEnable","active","fade","_touchListener","setSwallowTouches","Date","now","systemEvent","emit","scheduleOnce","onBagClick","target","data"],"mappings":";;;;;;AAAA;;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAQ;AACJC,qBAAS,IADL;AAEJC,kBAAMP,GAAGQ,IAFL;AAGJC,qBAAS;AAHL,SADA;AAMRC,qBAAa;AACTJ,qBAAS,CADA;AAETC,kBAAMP,GAAGW,OAFA;AAGTF,qBAAS;AAHA;AANL,KAHP;;AAgBL;;AAEAG,UAlBK,oBAkBK;AACN,aAAKC,IAAL,CAAUC,EAAV,CAAad,GAAGQ,IAAH,CAAQO,SAAR,CAAkBC,WAA/B,EAA2C,KAAKC,YAAhD,EAA6D,IAA7D;AACA,aAAKJ,IAAL,CAAUC,EAAV,CAAad,GAAGQ,IAAH,CAAQO,SAAR,CAAkBG,SAA/B,EAAyC,KAAKC,UAA9C,EAAyD,IAAzD;AACH,KArBI;AAuBLC,SAvBK,mBAuBI;AACLC,yBAAOC,SAAP,CAAiBC,QAAjB,CAA0B,KAAKlB,MAA/B;AACA,aAAKA,MAAL,CAAYmB,MAAZ,GAAqB,KAArB;AACA,aAAKnB,MAAL,CAAYS,EAAZ,CAAed,GAAGQ,IAAH,CAAQO,SAAR,CAAkBC,WAAjC,EAA6C,KAAKS,IAAlD,EAAuD,IAAvD;AACA,YAAI,KAAKZ,IAAL,CAAUa,cAAd,EAA8B;AAC1B,iBAAKb,IAAL,CAAUa,cAAV,CAAyBC,iBAAzB,CAA2C,KAA3C;AACH;AACJ,KA9BI;AAgCLV,gBAhCK,0BAgCS;AACV,aAAKP,WAAL,GAAmBkB,KAAKC,GAAL,EAAnB;AACA;AACA7B,WAAG8B,WAAH,CAAeC,IAAf,CAAoB,YAApB,EAAiC,EAAjC;AACA,aAAKC,YAAL,CAAkB,YAAI;AAClBhC,eAAG8B,WAAH,CAAeC,IAAf,CAAoB,cAApB,EAAmC,EAAnC;AACH,SAFD,EAEE,GAFF;AAGH,KAvCI;AAyCLZ,cAzCK,wBAyCO;AACR,YAAIS,KAAKC,GAAL,KAAa,KAAKnB,WAAnB,GAAkC,GAArC,EACA;AACI,iBAAKL,MAAL,CAAYmB,MAAZ,GAAqB,IAArB;AACA,iBAAKnB,MAAL,CAAY0B,IAAZ,CAAiB,MAAjB,EAAwB,EAAxB;AACH;AACJ,KA/CI;AAiDLN,QAjDK,kBAkDL;AACI,aAAKpB,MAAL,CAAYmB,MAAZ,GAAqB,KAArB;AACH,KApDI;AAsDLS,cAtDK,sBAsDMC,MAtDN,EAsDaC,IAtDb,EAsDkB;AACnBnC,WAAG8B,WAAH,CAAeC,IAAf,CAAoB,SAApB,EAA8B,EAA9B;AACA,aAAK1B,MAAL,CAAYmB,MAAZ,GAAqB,KAArB;AACH;AAzDI;;AA2DL;AA3DJ","file":"playerClick.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\home\\player","sourcesContent":["import global from './../../global/global';\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        infoBg: {\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '个人信息'\r\n        }, \r\n        currentTime: {\r\n            default: 0,\r\n            type: cc.Integer,\r\n            tooltip: '当前事件'\r\n        }, \r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this);\r\n        this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this);\r\n    },\r\n\r\n    start () {\r\n        global.FitHelper.onEnable(this.infoBg);\r\n        this.infoBg.active = false;\r\n        this.infoBg.on(cc.Node.EventType.TOUCH_START,this.fade,this);\r\n        if (this.node._touchListener) {\r\n            this.node._touchListener.setSwallowTouches(false);\r\n        }\r\n    },\r\n\r\n    onTouchStart(){\r\n        this.currentTime = Date.now();\r\n        //通过系统事件触发自定义锁，防止点击角色移动\r\n        cc.systemEvent.emit('playerLock',{});\r\n        this.scheduleOnce(()=>{\r\n            cc.systemEvent.emit('playerUnLock',{});\r\n        },0.2);\r\n    },\r\n\r\n    onTouchEnd(){\r\n        if((Date.now() - this.currentTime) < 200)\r\n        {\r\n            this.infoBg.active = true;\r\n            this.infoBg.emit('init',{});\r\n        }\r\n    },\r\n\r\n    fade()\r\n    {\r\n        this.infoBg.active = false;\r\n    },\r\n\r\n    onBagClick(target,data){\r\n        cc.systemEvent.emit('bagShow',{});\r\n        this.infoBg.active = false;\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}