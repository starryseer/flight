{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\home\\bag/assets\\script\\home\\bag\\food.js"],"names":["cc","Class","extends","Component","properties","foodLab","default","type","Label","tooltip","arrow","Node","unArrow","head","content","itemPrefab","Prefab","flag","onLoad","node","on","init","btnTouch","fade","systemEvent","minusBagLab","updateItems","start","onDestroy","off","show","active","removeAllChildren","num","index","global","itemData","items","configConf","item_id","item","instantiate","parent","param","id","emit","string","data","name","parseInt","children","getChildren"],"mappings":"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","file":"food.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\home\\bag","sourcesContent":["import global from './../../global/global';\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        foodLab: {\r\n            default: null,\r\n            type:cc.Label,\r\n            tooltip: '头部'\r\n        }, \r\n        arrow: {\r\n            default: null,\r\n            type:cc.Node,\r\n            tooltip: '选择箭头'\r\n        }, \r\n        unArrow: {\r\n            default: null,\r\n            type:cc.Node,\r\n            tooltip: '未选箭头'\r\n        }, \r\n        head: {\r\n            default: null,\r\n            type:cc.Node,\r\n            tooltip: '头部'\r\n        }, \r\n        content: {\r\n            default: null,\r\n            type:cc.Node,\r\n            tooltip: '内容'\r\n        }, \r\n        itemPrefab:{\r\n            default: null,\r\n            type:cc.Prefab,\r\n            tooltip: '道具预制体'\r\n        }, \r\n        flag: {\r\n            default: false,\r\n            tooltip: '开关标识'\r\n        }, \r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.node.on('init',this.init,this);\r\n        this.node.on('btnTouch',this.btnTouch,this);\r\n        this.node.on('fade',this.fade,this);\r\n        cc.systemEvent.on('minusBagLab',this.minusBagLab,this);\r\n        cc.systemEvent.on('updateItems',this.updateItems,this);\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    onDestroy(){\r\n        cc.systemEvent.off('minusBagLab',this.minusBagLab,this);\r\n        cc.systemEvent.off('updateItems',this.updateItems,this);\r\n    },\r\n\r\n    btnTouch(){\r\n        if(!this.flag)\r\n        {\r\n            this.show();\r\n        }\r\n        else\r\n        {\r\n            this.fade();\r\n        }\r\n\r\n    },\r\n\r\n    show(){\r\n        this.flag = true;\r\n        this.head.active = true;\r\n        this.node.active = this.flag; \r\n        this.arrow.active = true;\r\n        this.unArrow.active = false;      \r\n    },\r\n\r\n    fade(){\r\n        this.flag = false;\r\n        this.head.active = false;\r\n        this.node.active = this.flag;\r\n        this.arrow.active = false;\r\n        this.unArrow.active = true;\r\n    },\r\n\r\n    init(){\r\n        this.show();\r\n        this.content.removeAllChildren();\r\n        var num =0;\r\n        for(var index in global.itemData.items)\r\n        {\r\n            if(global.configConf['item'][global.itemData.items[index].item_id]['showType'] == 'food')\r\n            {\r\n                var item = cc.instantiate(this.itemPrefab);\r\n                item.parent = this.content;\r\n                var param = {\r\n                    num:global.itemData.items[index].num,\r\n                    item_id:global.itemData.items[index].item_id,\r\n                    id:global.itemData.items[index].id,\r\n                    type:global.itemData.items[index].type,\r\n                };\r\n                item.emit('init',param);\r\n                num++;\r\n            }\r\n \r\n        }\r\n        this.foodLab.string = num;\r\n        this.fade();\r\n    },\r\n\r\n    minusBagLab(data)\r\n    {\r\n        if(data['type'] == this.node.name)\r\n            this.foodLab.string = parseInt(this.foodLab.string) - 1;\r\n    },\r\n\r\n    updateItems(data)\r\n    {\r\n        if(global.configConf['item'][data['item_id']]['showType'] == 'food')\r\n        {\r\n            var children = this.content.getChildren();\r\n            for(var index in children)\r\n            {\r\n                children[index].emit('updateItem',data);\r\n            }\r\n        }\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}