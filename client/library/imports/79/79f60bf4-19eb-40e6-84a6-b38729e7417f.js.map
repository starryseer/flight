{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\shop/assets\\script\\shop\\main.js"],"names":["cc","Class","extends","Component","properties","bg","default","type","Node","tooltip","num","Label","gold","onLoad","global","FitHelper","fitFun","init","systemEvent","on","onDestroy","off","start","param","userId","userData","id","token","HttpHelper","httpPost","urlConf","clientAttr","rsp","code","clientAttrData","initClientAttrData","data","string","onBackClick","target","director","loadScene","onPlusClick","parseInt","onMinusClick","onBuyClick","emit","onBuyTenClick"],"mappings":";;;;;;AAAA;;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,YAAI;AACAC,qBAAS,IADT;AAEAC,kBAAMP,GAAGQ,IAFT;AAGAC,qBAAS;AAHT,SADI;AAMRC,aAAK;AACDJ,qBAAS,IADR;AAEDC,kBAAMP,GAAGW,KAFR;AAGDF,qBAAS;AAHR,SANG;AAWRG,cAAM;AACFN,qBAAS,IADP;AAEFC,kBAAMP,GAAGW,KAFP;AAGFF,qBAAS;AAHP;AAXE,KAHP;;AAqBL;;AAEAI,UAvBK,oBAuBK;AACNC,yBAAOC,SAAP,CAAiBC,MAAjB,CAAwB,KAAKX,EAA7B;AACA,aAAKY,IAAL;AACAjB,WAAGkB,WAAH,CAAeC,EAAf,CAAkB,UAAlB,EAA6B,KAAKF,IAAlC,EAAuC,IAAvC;AACH,KA3BI;AA6BLG,aA7BK,uBA6BM;AACPpB,WAAGkB,WAAH,CAAeG,GAAf,CAAmB,UAAnB,EAA8B,KAAKJ,IAAnC,EAAwC,IAAxC;AACH,KA/BI;AAiCLK,SAjCK,mBAiCI;AAAA;;AACL,YAAIC,QAAQ,EAACC,QAAOV,iBAAOW,QAAP,CAAgBC,EAAxB,EAA2BC,OAAMb,iBAAOW,QAAP,CAAgBE,KAAjD,EAAZ;AACAb,yBAAOc,UAAP,CAAkBC,QAAlB,CAA2Bf,iBAAOgB,OAAP,CAAeC,UAA1C,EAAqDR,KAArD,EAA2D,UAACS,GAAD,EAAO;AAC9D,gBAAGA,OAAO,CAAC,CAAX,EACA;AACI;AACH;;AAED,gBAAGA,IAAIC,IAAJ,IAAY,GAAf,EACA;AACInB,iCAAOoB,cAAP,CAAsBC,kBAAtB,CAAyCH,IAAII,IAAJ,CAASL,UAAlD;AACA,sBAAKd,IAAL;AACH,aAJD,MAMA;AACI;AACH;AACJ,SAfD;AAgBH,KAnDI;AAqDLA,QArDK,kBAqDC;AACF,aAAKL,IAAL,CAAUyB,MAAV,GAAmBvB,iBAAOoB,cAAP,CAAsBtB,IAAzC;AAEH,KAxDI;AA0DL0B,eA1DK,uBA0DOC,MA1DP,EA0DcH,IA1Dd,EA0DmB;AACpBpC,WAAGwC,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACH,KA5DI;AA8DLC,eA9DK,uBA8DOH,MA9DP,EA8DcH,IA9Dd,EA8DmB;AACpB,YAAI1B,MAAMiC,SAAS,KAAKjC,GAAL,CAAS2B,MAAlB,CAAV;AACA,YAAG3B,MAAK,CAAR,EACA;AACIA;AACA,iBAAKA,GAAL,CAAS2B,MAAT,GAAkB3B,GAAlB;AACH;AACJ,KArEI;AAuELkC,gBAvEK,wBAuEQL,MAvER,EAuEeH,IAvEf,EAuEoB;AACrB,YAAI1B,MAAMiC,SAAS,KAAKjC,GAAL,CAAS2B,MAAlB,CAAV;AACA,YAAG3B,MAAK,CAAR,EACA;AACIA;AACA,iBAAKA,GAAL,CAAS2B,MAAT,GAAkB3B,GAAlB;AACH;AACJ,KA9EI;AAgFLmC,cAhFK,sBAgFMN,MAhFN,EAgFaH,IAhFb,EAiFL;AACIpC,WAAGkB,WAAH,CAAe4B,IAAf,CAAoB,YAApB,EAAiCH,SAAS,KAAKjC,GAAL,CAAS2B,MAAlB,CAAjC;AACH,KAnFI;AAqFLU,iBArFK,yBAqFSR,MArFT,EAqFgBH,IArFhB,EAsFL;AACIpC,WAAGkB,WAAH,CAAe4B,IAAf,CAAoB,YAApB,EAAiC,EAAjC;AACH;AAxFI;;AA0FL;AA1FJ","file":"main.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\shop","sourcesContent":["import global from \"./../global/global\";\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        bg: {\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '背景'\r\n        },\r\n        num: {\r\n            default: null,\r\n            type: cc.Label,\r\n            tooltip: '数量'\r\n        },\r\n        gold: {\r\n            default: null,\r\n            type: cc.Label,\r\n            tooltip: '金币'\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        global.FitHelper.fitFun(this.bg);\r\n        this.init();\r\n        cc.systemEvent.on('mainInit',this.init,this);\r\n    },\r\n\r\n    onDestroy(){\r\n        cc.systemEvent.off('mainInit',this.init,this);\r\n    },\r\n\r\n    start () {\r\n        var param = {userId:global.userData.id,token:global.userData.token};\r\n        global.HttpHelper.httpPost(global.urlConf.clientAttr,param,(rsp)=>{\r\n            if(rsp == -1)\r\n            {\r\n                return;\r\n            }\r\n\r\n            if(rsp.code == 200)\r\n            {\r\n                global.clientAttrData.initClientAttrData(rsp.data.clientAttr);\r\n                this.init();\r\n            }\r\n            else\r\n            {\r\n                return;\r\n            }\r\n        });\r\n    },\r\n\r\n    init(){\r\n        this.gold.string = global.clientAttrData.gold;\r\n\r\n    },\r\n\r\n    onBackClick(target,data){\r\n        cc.director.loadScene('home');\r\n    },\r\n\r\n    onPlusClick(target,data){\r\n        var num = parseInt(this.num.string);\r\n        if(num <9)\r\n        {\r\n            num++;\r\n            this.num.string = num;\r\n        }\r\n    }, \r\n\r\n    onMinusClick(target,data){\r\n        var num = parseInt(this.num.string);\r\n        if(num >1)\r\n        {\r\n            num--;\r\n            this.num.string = num;\r\n        }\r\n    }, \r\n\r\n    onBuyClick(target,data)\r\n    {\r\n        cc.systemEvent.emit('submitShow',parseInt(this.num.string));\r\n    },\r\n\r\n    onBuyTenClick(target,data)\r\n    {\r\n        cc.systemEvent.emit('submitShow',10);\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}