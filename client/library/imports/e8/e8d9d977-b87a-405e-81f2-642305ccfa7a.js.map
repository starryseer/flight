{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\shop/assets\\script\\shop\\submitFrame.js"],"names":["cc","Class","extends","Component","properties","bg","default","type","Node","tooltip","fen","Label","total","onLoad","global","FitHelper","fitFun","systemEvent","on","show","onDestroy","off","start","data","node","setPosition","v2","string","fade","onCloseClick","target","onSubmitClick","param","userId","userData","id","token","pool","HttpHelper","httpPost","urlConf","shop_draw","rsp","code","clientAttrData","initClientAttrData","clientAttr","itemData","update","get","consume","emit"],"mappings":";;;;;;AAAA;;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,YAAI;AACAC,qBAAS,IADT;AAEAC,kBAAMP,GAAGQ,IAFT;AAGAC,qBAAS;AAHT,SADI;AAMRC,aAAK;AACDJ,qBAAS,IADR;AAEDC,kBAAMP,GAAGW,KAFR;AAGDF,qBAAS;AAHR,SANG;AAWRG,eAAO;AACHN,qBAAS,IADN;AAEHC,kBAAMP,GAAGW,KAFN;AAGHF,qBAAS;AAHN;AAXC,KAHP;;AAqBL;;AAEAI,UAvBK,oBAuBK;AACNC,yBAAOC,SAAP,CAAiBC,MAAjB,CAAwB,KAAKX,EAA7B;AACAL,WAAGiB,WAAH,CAAeC,EAAf,CAAkB,YAAlB,EAA+B,KAAKC,IAApC,EAAyC,IAAzC;AACH,KA1BI;AA4BLC,aA5BK,uBA4BM;AACPpB,WAAGiB,WAAH,CAAeI,GAAf,CAAmB,YAAnB,EAAgC,KAAKF,IAArC,EAA0C,IAA1C;AACH,KA9BI;AAgCLG,SAhCK,mBAgCI,CAER,CAlCI;AAoCLH,QApCK,gBAoCAI,IApCA,EAoCK;AACN,aAAKC,IAAL,CAAUC,WAAV,CAAsBzB,GAAG0B,EAAH,CAAM,CAAN,EAAQ,CAAR,CAAtB;AACA,aAAKhB,GAAL,CAASiB,MAAT,GAAkBJ,IAAlB;AACA,aAAKX,KAAL,CAAWe,MAAX,GAAoBJ,OAAO,GAA3B;AACH,KAxCI;AA0CLK,QA1CK,kBA0CC;AACF,aAAKJ,IAAL,CAAUC,WAAV,CAAsBzB,GAAG0B,EAAH,CAAM,IAAN,EAAW,CAAX,CAAtB;AACH,KA5CI;AA8CLG,gBA9CK,wBA8CQC,MA9CR,EA8CeP,IA9Cf,EA8CoB;AACrB,aAAKK,IAAL;AACH,KAhDI;AAkDLG,iBAlDK,2BAkDU;AAAA;;AACX,YAAIC,QAAQ,EAACC,QAAOnB,iBAAOoB,QAAP,CAAgBC,EAAxB,EAA2BC,OAAMtB,iBAAOoB,QAAP,CAAgBE,KAAjD,EAAuD7B,MAAK,KAAKG,GAAL,CAASiB,MAArE,EAA4EU,MAAK,WAAjF,EAAZ;AACAvB,yBAAOwB,UAAP,CAAkBC,QAAlB,CAA2BzB,iBAAO0B,OAAP,CAAeC,SAA1C,EAAoDT,KAApD,EAA0D,UAACU,GAAD,EAAO;AAC7D,gBAAGA,OAAO,CAAC,CAAX,EACA;AACI;AACH;;AAED,gBAAGA,IAAIC,IAAJ,IAAY,GAAf,EACA;AACI7B,iCAAO8B,cAAP,CAAsBC,kBAAtB,CAAyCH,IAAInB,IAAJ,CAASuB,UAAlD;AACAhC,iCAAOiC,QAAP,CAAgBC,MAAhB,CAAuBN,IAAInB,IAAJ,CAAS0B,GAAhC;AACAnC,iCAAOiC,QAAP,CAAgBC,MAAhB,CAAuBN,IAAInB,IAAJ,CAAS2B,OAAhC;AACA,sBAAKtB,IAAL;AACA5B,mBAAGiB,WAAH,CAAekC,IAAf,CAAoB,SAApB,EAA8BT,IAAInB,IAAJ,CAASJ,IAAvC;AACH,aAPD,MASA;AACI;AACH;AACJ,SAlBD;AAmBH;AAvEI;;AAyEL;AAzEJ","file":"submitFrame.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\shop","sourcesContent":["import global from './../global/global';\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        bg: {\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '背景'\r\n        },\r\n        fen: {\r\n            default: null,\r\n            type: cc.Label,\r\n            tooltip: '份数'\r\n        },\r\n        total: {\r\n            default: null,\r\n            type: cc.Label,\r\n            tooltip: '总数'\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        global.FitHelper.fitFun(this.bg);\r\n        cc.systemEvent.on('submitShow',this.show,this);\r\n    },\r\n\r\n    onDestroy(){\r\n        cc.systemEvent.off('submitShow',this.show,this);\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    show(data){\r\n        this.node.setPosition(cc.v2(0,0));\r\n        this.fen.string = data;\r\n        this.total.string = data * 100;\r\n    },\r\n\r\n    fade(){\r\n        this.node.setPosition(cc.v2(1000,0));\r\n    },\r\n\r\n    onCloseClick(target,data){\r\n        this.fade();\r\n    },\r\n\r\n    onSubmitClick(){\r\n        var param = {userId:global.userData.id,token:global.userData.token,type:this.fen.string,pool:'drawBasic'};\r\n        global.HttpHelper.httpPost(global.urlConf.shop_draw,param,(rsp)=>{\r\n            if(rsp == -1)\r\n            {\r\n                return;\r\n            }\r\n\r\n            if(rsp.code == 200)\r\n            {\r\n                global.clientAttrData.initClientAttrData(rsp.data.clientAttr);\r\n                global.itemData.update(rsp.data.get);\r\n                global.itemData.update(rsp.data.consume);\r\n                this.fade();\r\n                cc.systemEvent.emit('getShow',rsp.data.show);\r\n            }\r\n            else\r\n            {\r\n                return;\r\n            }\r\n        });\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}