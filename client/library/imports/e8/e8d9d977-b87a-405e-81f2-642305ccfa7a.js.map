{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\shop/assets\\script\\shop\\submitFrame.js"],"names":["cc","Class","extends","Component","properties","bg","default","type","Node","tooltip","fen","Label","total","onLoad","global","FitHelper","fitFun","onEnable","systemEvent","on","show","onDestroy","off","start","data","node","setPosition","v2","string","fade","onCloseClick","target","onSubmitClick","param","userId","userData","id","token","pool","HttpHelper","httpPost","urlConf","shop_draw","rsp","code","clientAttrData","initClientAttrData","clientAttr","itemData","update","get","consume","emit"],"mappings":";;;;;;AAAA;;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,YAAI;AACAC,qBAAS,IADT;AAEAC,kBAAMP,GAAGQ,IAFT;AAGAC,qBAAS;AAHT,SADI;AAMRC,aAAK;AACDJ,qBAAS,IADR;AAEDC,kBAAMP,GAAGW,KAFR;AAGDF,qBAAS;AAHR,SANG;AAWRG,eAAO;AACHN,qBAAS,IADN;AAEHC,kBAAMP,GAAGW,KAFN;AAGHF,qBAAS;AAHN;AAXC,KAHP;;AAqBL;;AAEAI,UAvBK,oBAuBK;AACNC,yBAAOC,SAAP,CAAiBC,MAAjB,CAAwB,KAAKX,EAA7B;AACAS,yBAAOC,SAAP,CAAiBE,QAAjB,CAA0B,KAAKZ,EAA/B;AACAL,WAAGkB,WAAH,CAAeC,EAAf,CAAkB,YAAlB,EAA+B,KAAKC,IAApC,EAAyC,IAAzC;AACH,KA3BI;AA6BLC,aA7BK,uBA6BM;AACPrB,WAAGkB,WAAH,CAAeI,GAAf,CAAmB,YAAnB,EAAgC,KAAKF,IAArC,EAA0C,IAA1C;AACH,KA/BI;AAiCLG,SAjCK,mBAiCI,CAER,CAnCI;AAqCLH,QArCK,gBAqCAI,IArCA,EAqCK;AACN,aAAKC,IAAL,CAAUC,WAAV,CAAsB1B,GAAG2B,EAAH,CAAM,CAAN,EAAQ,CAAR,CAAtB;AACA,aAAKjB,GAAL,CAASkB,MAAT,GAAkBJ,IAAlB;AACA,aAAKZ,KAAL,CAAWgB,MAAX,GAAoBJ,OAAO,GAA3B;AACH,KAzCI;AA2CLK,QA3CK,kBA2CC;AACF,aAAKJ,IAAL,CAAUC,WAAV,CAAsB1B,GAAG2B,EAAH,CAAM,IAAN,EAAW,CAAX,CAAtB;AACH,KA7CI;AA+CLG,gBA/CK,wBA+CQC,MA/CR,EA+CeP,IA/Cf,EA+CoB;AACrB,aAAKK,IAAL;AACH,KAjDI;AAmDLG,iBAnDK,2BAmDU;AAAA;;AACX,YAAIC,QAAQ,EAACC,QAAOpB,iBAAOqB,QAAP,CAAgBC,EAAxB,EAA2BC,OAAMvB,iBAAOqB,QAAP,CAAgBE,KAAjD,EAAuD9B,MAAK,KAAKG,GAAL,CAASkB,MAArE,EAA4EU,MAAK,WAAjF,EAAZ;AACAxB,yBAAOyB,UAAP,CAAkBC,QAAlB,CAA2B1B,iBAAO2B,OAAP,CAAeC,SAA1C,EAAoDT,KAApD,EAA0D,UAACU,GAAD,EAAO;AAC7D,gBAAGA,OAAO,CAAC,CAAX,EACA;AACI;AACH;;AAED,gBAAGA,IAAIC,IAAJ,IAAY,GAAf,EACA;AACI9B,iCAAO+B,cAAP,CAAsBC,kBAAtB,CAAyCH,IAAInB,IAAJ,CAASuB,UAAlD;AACAjC,iCAAOkC,QAAP,CAAgBC,MAAhB,CAAuBN,IAAInB,IAAJ,CAAS0B,GAAhC;AACApC,iCAAOkC,QAAP,CAAgBC,MAAhB,CAAuBN,IAAInB,IAAJ,CAAS2B,OAAhC;AACA,sBAAKtB,IAAL;AACA7B,mBAAGkB,WAAH,CAAekC,IAAf,CAAoB,SAApB,EAA8BT,IAAInB,IAAJ,CAASJ,IAAvC;AACH,aAPD,MASA;AACI;AACH;AACJ,SAlBD;AAmBH;AAxEI;;AA0EL;AA1EJ","file":"submitFrame.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\shop","sourcesContent":["import global from './../global/global';\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        bg: {\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '背景'\r\n        },\r\n        fen: {\r\n            default: null,\r\n            type: cc.Label,\r\n            tooltip: '份数'\r\n        },\r\n        total: {\r\n            default: null,\r\n            type: cc.Label,\r\n            tooltip: '总数'\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        global.FitHelper.fitFun(this.bg);\r\n        global.FitHelper.onEnable(this.bg);\r\n        cc.systemEvent.on('submitShow',this.show,this);\r\n    },\r\n\r\n    onDestroy(){\r\n        cc.systemEvent.off('submitShow',this.show,this);\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    show(data){\r\n        this.node.setPosition(cc.v2(0,0));\r\n        this.fen.string = data;\r\n        this.total.string = data * 100;\r\n    },\r\n\r\n    fade(){\r\n        this.node.setPosition(cc.v2(1000,0));\r\n    },\r\n\r\n    onCloseClick(target,data){\r\n        this.fade();\r\n    },\r\n\r\n    onSubmitClick(){\r\n        var param = {userId:global.userData.id,token:global.userData.token,type:this.fen.string,pool:'drawBasic'};\r\n        global.HttpHelper.httpPost(global.urlConf.shop_draw,param,(rsp)=>{\r\n            if(rsp == -1)\r\n            {\r\n                return;\r\n            }\r\n\r\n            if(rsp.code == 200)\r\n            {\r\n                global.clientAttrData.initClientAttrData(rsp.data.clientAttr);\r\n                global.itemData.update(rsp.data.get);\r\n                global.itemData.update(rsp.data.consume);\r\n                this.fade();\r\n                cc.systemEvent.emit('getShow',rsp.data.show);\r\n            }\r\n            else\r\n            {\r\n                return;\r\n            }\r\n        });\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}