{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\home\\prefab/assets\\script\\home\\prefab\\homeItem.js"],"names":["cc","Class","extends","Component","properties","itemAtlas","default","type","SpriteAtlas","tooltip","itemSprite","Sprite","itemLab","Label","itemId","Integer","id","onLoad","node","on","init","updateItem","start","data","spriteFrame","getSpriteFrame","global","configConf","string","parseInt","item","systemEvent","emit","destroy","onButtonClick","convertToWorldSpaceAR","v2","substr"],"mappings":";;;;;;AAAA;;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,mBAAU;AACNC,qBAAS,IADH;AAENC,kBAAMP,GAAGQ,WAFH;AAGNC,qBAAS;AAHH,SADF;AAMRC,oBAAW;AACPJ,qBAAS,IADF;AAEPC,kBAAMP,GAAGW,MAFF;AAGPF,qBAAS;AAHF,SANH;AAWRG,iBAAQ;AACJN,qBAAS,IADL;AAEJC,kBAAMP,GAAGa,KAFL;AAGJJ,qBAAS;AAHL,SAXA;AAgBRK,gBAAO;AACHR,qBAAS,CADN;AAEHC,kBAAMP,GAAGe,OAFN;AAGHN,qBAAS;AAHN,SAhBC;AAqBRO,YAAG;AACCV,qBAAS,CADV;AAECC,kBAAMP,GAAGe,OAFV;AAGCN,qBAAS;AAHV;AArBK,KAHP;;AA+BL;;AAEAQ,UAjCK,oBAiCK;AACN,aAAKC,IAAL,CAAUC,EAAV,CAAa,MAAb,EAAoB,KAAKC,IAAzB,EAA8B,IAA9B;AACA,aAAKF,IAAL,CAAUC,EAAV,CAAa,YAAb,EAA0B,KAAKE,UAA/B,EAA0C,IAA1C;AACH,KApCI;AAsCLC,SAtCK,mBAsCI,CAER,CAxCI;AA0CLF,QA1CK,gBA0CAG,IA1CA,EA0CK;AACN,aAAKb,UAAL,CAAgBc,WAAhB,GAA8B,KAAKnB,SAAL,CAAeoB,cAAf,CAA8BC,iBAAOC,UAAP,CAAkB,MAAlB,EAA0BJ,KAAK,SAAL,CAA1B,EAA2C,OAA3C,CAA9B,CAA9B;AACA,aAAKX,OAAL,CAAagB,MAAb,GAAsB,MAAML,KAAK,KAAL,CAA5B;AACA,aAAKT,MAAL,GAAcS,KAAK,SAAL,CAAd;AACA,aAAKP,EAAL,GAAUa,SAASN,KAAK,IAAL,CAAT,CAAV;AAEH,KAhDI;AAkDLF,cAlDK,sBAkDMS,IAlDN,EAkDW;;AAEZ,YAAGA,KAAK,IAAL,KAAc,KAAKd,EAAtB,EACI;;AAEJ,YAAGc,KAAK,KAAL,KAAe,CAAlB,EACA;AACI,gBAAIvB,OAAOmB,iBAAOC,UAAP,CAAkB,MAAlB,EAA0B,KAAKb,MAA/B,EAAuC,UAAvC,CAAX;AACAd,eAAG+B,WAAH,CAAeC,IAAf,CAAoB,aAApB,EAAkC,EAAC,QAAOzB,IAAR,EAAlC;AACA,iBAAKW,IAAL,CAAUe,OAAV;AACH,SALD,MAOI,KAAKrB,OAAL,CAAagB,MAAb,GAAsB,MAAME,KAAK,KAAL,CAA5B;AACP,KA/DI;AAiELI,iBAjEK,2BAiEU;AACX,YAAIX,OAAO;AACP,uBAAU,KAAKT,MADR;AAEP,mBAAM,KAAKI,IAAL,CAAUiB,qBAAV,CAAgCnC,GAAGoC,EAAH,CAAM,CAAC,GAAP,EAAW,CAAC,GAAZ,CAAhC,CAFC;AAGP,mBAAMP,SAAS,KAAKjB,OAAL,CAAagB,MAAb,CAAoBS,MAApB,CAA2B,CAA3B,CAAT,CAHC;AAIP,kBAAK,KAAKrB;AAJH,SAAX;AAMAhB,WAAG+B,WAAH,CAAeC,IAAf,CAAoB,UAApB,EAA+BT,IAA/B;AACH;AAzEI;;AA2EL;AA3EJ","file":"homeItem.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\home\\prefab","sourcesContent":["import global from './../../global/global';\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        itemAtlas:{\r\n            default: null,\r\n            type: cc.SpriteAtlas,\r\n            tooltip: '道具plist'\r\n        },\r\n        itemSprite:{\r\n            default: null,\r\n            type: cc.Sprite,\r\n            tooltip: '道具图片'\r\n        },\r\n        itemLab:{\r\n            default: null,\r\n            type: cc.Label,\r\n            tooltip: '道具数量'\r\n        },\r\n        itemId:{\r\n            default: 0,\r\n            type: cc.Integer,\r\n            tooltip: '道具id'\r\n        },\r\n        id:{\r\n            default: 0,\r\n            type: cc.Integer,\r\n            tooltip: 'id'\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.node.on('init',this.init,this);\r\n        this.node.on('updateItem',this.updateItem,this);\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    init(data){\r\n        this.itemSprite.spriteFrame = this.itemAtlas.getSpriteFrame(global.configConf['item'][data['item_id']]['image']);\r\n        this.itemLab.string = '✖' + data['num'];\r\n        this.itemId = data['item_id'];\r\n        this.id = parseInt(data['id']);\r\n\r\n    },\r\n\r\n    updateItem(item){\r\n\r\n        if(item['id'] != this.id)\r\n            return;\r\n        \r\n        if(item['num'] == 0)\r\n        {\r\n            var type = global.configConf['item'][this.itemId]['showType'];\r\n            cc.systemEvent.emit('minusBagLab',{'type':type});\r\n            this.node.destroy();\r\n        }\r\n        else\r\n            this.itemLab.string = \"✖\" + item['num'];\r\n    },\r\n\r\n    onButtonClick(){\r\n        var data = {\r\n            'item_id':this.itemId,\r\n            'pos':this.node.convertToWorldSpaceAR(cc.v2(-320,-475)),\r\n            'num':parseInt(this.itemLab.string.substr(1)),\r\n            'id':this.id\r\n        };\r\n        cc.systemEvent.emit('showInfo',data);\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}