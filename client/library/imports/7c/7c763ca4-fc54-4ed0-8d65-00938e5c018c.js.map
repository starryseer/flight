{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\home\\bag/assets\\script\\home\\bag\\item.js"],"names":["cc","Class","extends","Component","properties","itemLab","default","type","Label","tooltip","arrow","Node","unArrow","head","content","itemPrefab","Prefab","flag","onLoad","node","on","init","btnTouch","fade","systemEvent","minusBagLab","updateItems","start","onDestroy","off","show","removeAllChildren","num","index","global","itemData","items","configConf","item_id","item","instantiate","parent","param","id","emit","string","active","data","name","parseInt","children","getChildren"],"mappings":";;;;;;AAAA;;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,iBAAS;AACLC,qBAAS,IADJ;AAELC,kBAAKP,GAAGQ,KAFH;AAGLC,qBAAS;AAHJ,SADD;AAMRC,eAAO;AACHJ,qBAAS,IADN;AAEHC,kBAAKP,GAAGW,IAFL;AAGHF,qBAAS;AAHN,SANC;AAWRG,iBAAS;AACLN,qBAAS,IADJ;AAELC,kBAAKP,GAAGW,IAFH;AAGLF,qBAAS;AAHJ,SAXD;AAgBRI,cAAM;AACFP,qBAAS,IADP;AAEFC,kBAAKP,GAAGW,IAFN;AAGFF,qBAAS;AAHP,SAhBE;AAqBRK,iBAAS;AACLR,qBAAS,IADJ;AAELC,kBAAKP,GAAGW,IAFH;AAGLF,qBAAS;AAHJ,SArBD;AA0BRM,oBAAW;AACPT,qBAAS,IADF;AAEPC,kBAAKP,GAAGgB,MAFD;AAGPP,qBAAS;AAHF,SA1BH;AA+BRQ,cAAM;AACFX,qBAAS,KADP;AAEFG,qBAAS;AAFP;AA/BE,KAHP;;AAwCL;;AAEAS,UA1CK,oBA0CK;AACN,aAAKC,IAAL,CAAUC,EAAV,CAAa,MAAb,EAAoB,KAAKC,IAAzB,EAA8B,IAA9B;AACA,aAAKF,IAAL,CAAUC,EAAV,CAAa,UAAb,EAAwB,KAAKE,QAA7B,EAAsC,IAAtC;AACA,aAAKH,IAAL,CAAUC,EAAV,CAAa,MAAb,EAAoB,KAAKG,IAAzB,EAA8B,IAA9B;AACAvB,WAAGwB,WAAH,CAAeJ,EAAf,CAAkB,aAAlB,EAAgC,KAAKK,WAArC,EAAiD,IAAjD;AACAzB,WAAGwB,WAAH,CAAeJ,EAAf,CAAkB,aAAlB,EAAgC,KAAKM,WAArC,EAAiD,IAAjD;AACH,KAhDI;AAkDLC,SAlDK,mBAkDI,CAER,CApDI;AAsDLC,aAtDK,uBAsDM;AACP5B,WAAGwB,WAAH,CAAeK,GAAf,CAAmB,aAAnB,EAAiC,KAAKJ,WAAtC,EAAkD,IAAlD;AACAzB,WAAGwB,WAAH,CAAeK,GAAf,CAAmB,aAAnB,EAAiC,KAAKH,WAAtC,EAAkD,IAAlD;AACH,KAzDI;AA2DLJ,YA3DK,sBA2DK;AACN,YAAG,CAAC,KAAKL,IAAT,EACA;AACI,iBAAKa,IAAL;AACH,SAHD,MAKA;AACI,iBAAKP,IAAL;AACH;AAGJ,KAtEI;AAwELF,QAxEK,kBAwEC;AACF,aAAKS,IAAL;AACA,aAAKhB,OAAL,CAAaiB,iBAAb;AACA,YAAIC,MAAK,CAAT;AACA,aAAI,IAAIC,KAAR,IAAiBC,iBAAOC,QAAP,CAAgBC,KAAjC,EACA;AACI,gBAAGF,iBAAOG,UAAP,CAAkB,MAAlB,EAA0BH,iBAAOC,QAAP,CAAgBC,KAAhB,CAAsBH,KAAtB,EAA6BK,OAAvD,EAAgE,UAAhE,KAA+E,MAAlF,EACA;AACI,oBAAIC,OAAOvC,GAAGwC,WAAH,CAAe,KAAKzB,UAApB,CAAX;AACAwB,qBAAKE,MAAL,GAAc,KAAK3B,OAAnB;AACA,oBAAI4B,QAAQ;AACRV,yBAAIE,iBAAOC,QAAP,CAAgBC,KAAhB,CAAsBH,KAAtB,EAA6BD,GADzB;AAERM,6BAAQJ,iBAAOC,QAAP,CAAgBC,KAAhB,CAAsBH,KAAtB,EAA6BK,OAF7B;AAGRK,wBAAGT,iBAAOC,QAAP,CAAgBC,KAAhB,CAAsBH,KAAtB,EAA6BU,EAHxB;AAIRpC,0BAAK2B,iBAAOC,QAAP,CAAgBC,KAAhB,CAAsBH,KAAtB,EAA6B1B;AAJ1B,iBAAZ;AAMAgC,qBAAKK,IAAL,CAAU,MAAV,EAAiBF,KAAjB;AACAV;AACH;AAEJ;AACD,aAAK3B,OAAL,CAAawC,MAAb,GAAsBb,GAAtB;AACA,aAAKT,IAAL;AACH,KA/FI;AAiGLO,QAjGK,kBAiGC;AACF,aAAKb,IAAL,GAAY,IAAZ;AACA,aAAKJ,IAAL,CAAUiC,MAAV,GAAmB,IAAnB;AACA,aAAK3B,IAAL,CAAU2B,MAAV,GAAmB,KAAK7B,IAAxB;AACA,aAAKP,KAAL,CAAWoC,MAAX,GAAoB,IAApB;AACA,aAAKlC,OAAL,CAAakC,MAAb,GAAsB,KAAtB;AACH,KAvGI;AAyGLvB,QAzGK,kBAyGC;AACF,aAAKN,IAAL,GAAY,KAAZ;AACA,aAAKJ,IAAL,CAAUiC,MAAV,GAAmB,KAAnB;AACA,aAAK3B,IAAL,CAAU2B,MAAV,GAAmB,KAAK7B,IAAxB;AACA,aAAKP,KAAL,CAAWoC,MAAX,GAAoB,KAApB;AACA,aAAKlC,OAAL,CAAakC,MAAb,GAAsB,IAAtB;AACH,KA/GI;AAiHLrB,eAjHK,uBAiHOsB,IAjHP,EAkHL;AACI,YAAGA,KAAK,MAAL,KAAgB,KAAK5B,IAAL,CAAU6B,IAA7B,EACI,KAAK3C,OAAL,CAAawC,MAAb,GAAsBI,SAAS,KAAK5C,OAAL,CAAawC,MAAtB,IAAgC,CAAtD;AACP,KArHI;AAuHLnB,eAvHK,uBAuHOqB,IAvHP,EAwHL;AACI,YAAGb,iBAAOG,UAAP,CAAkB,MAAlB,EAA0BU,KAAK,SAAL,CAA1B,EAA2C,UAA3C,KAA0D,MAA7D,EACA;AACI,gBAAIG,WAAW,KAAKpC,OAAL,CAAaqC,WAAb,EAAf;AACA,iBAAI,IAAIlB,KAAR,IAAiBiB,QAAjB,EACA;AACIA,yBAASjB,KAAT,EAAgBW,IAAhB,CAAqB,YAArB,EAAkCG,IAAlC;AACH;AACJ;AACJ;AAjII;;AAmIL;AAnIJ","file":"item.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\home\\bag","sourcesContent":["import global from './../../global/global';\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        itemLab: {\r\n            default: null,\r\n            type:cc.Label,\r\n            tooltip: '头部'\r\n        }, \r\n        arrow: {\r\n            default: null,\r\n            type:cc.Node,\r\n            tooltip: '选择箭头'\r\n        }, \r\n        unArrow: {\r\n            default: null,\r\n            type:cc.Node,\r\n            tooltip: '未选箭头'\r\n        }, \r\n        head: {\r\n            default: null,\r\n            type:cc.Node,\r\n            tooltip: '头部'\r\n        }, \r\n        content: {\r\n            default: null,\r\n            type:cc.Node,\r\n            tooltip: '内容'\r\n        }, \r\n        itemPrefab:{\r\n            default: null,\r\n            type:cc.Prefab,\r\n            tooltip: '道具预制体'\r\n        }, \r\n        flag: {\r\n            default: false,\r\n            tooltip: '开关标识'\r\n        }, \r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.node.on('init',this.init,this);\r\n        this.node.on('btnTouch',this.btnTouch,this);\r\n        this.node.on('fade',this.fade,this);\r\n        cc.systemEvent.on('minusBagLab',this.minusBagLab,this);\r\n        cc.systemEvent.on('updateItems',this.updateItems,this);\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    onDestroy(){\r\n        cc.systemEvent.off('minusBagLab',this.minusBagLab,this);\r\n        cc.systemEvent.off('updateItems',this.updateItems,this);\r\n    },\r\n\r\n    btnTouch(){\r\n        if(!this.flag)\r\n        {\r\n            this.show();\r\n        }\r\n        else\r\n        {\r\n            this.fade();\r\n        }\r\n        \r\n\r\n    },\r\n\r\n    init(){\r\n        this.show();\r\n        this.content.removeAllChildren();\r\n        var num =0;\r\n        for(var index in global.itemData.items)\r\n        {\r\n            if(global.configConf['item'][global.itemData.items[index].item_id]['showType'] == 'item')\r\n            {\r\n                var item = cc.instantiate(this.itemPrefab);\r\n                item.parent = this.content;\r\n                var param = {\r\n                    num:global.itemData.items[index].num,\r\n                    item_id:global.itemData.items[index].item_id,\r\n                    id:global.itemData.items[index].id,\r\n                    type:global.itemData.items[index].type,\r\n                };\r\n                item.emit('init',param);\r\n                num++;\r\n            }\r\n \r\n        }\r\n        this.itemLab.string = num;\r\n        this.fade();\r\n    },\r\n\r\n    show(){\r\n        this.flag = true;\r\n        this.head.active = true;\r\n        this.node.active = this.flag;\r\n        this.arrow.active = true;\r\n        this.unArrow.active = false;   \r\n    },\r\n\r\n    fade(){\r\n        this.flag = false;\r\n        this.head.active = false;\r\n        this.node.active = this.flag;\r\n        this.arrow.active = false;\r\n        this.unArrow.active = true;\r\n    },\r\n\r\n    minusBagLab(data)\r\n    {\r\n        if(data['type'] == this.node.name)\r\n            this.itemLab.string = parseInt(this.itemLab.string) - 1;\r\n    },\r\n\r\n    updateItems(data)\r\n    {\r\n        if(global.configConf['item'][data['item_id']]['showType'] == 'item')\r\n        {\r\n            var children = this.content.getChildren();\r\n            for(var index in children)\r\n            {\r\n                children[index].emit('updateItem',data);\r\n            }\r\n        }\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}