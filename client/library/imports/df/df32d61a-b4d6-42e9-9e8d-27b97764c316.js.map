{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\home\\player/assets\\script\\home\\player\\player.js"],"names":["cc","Class","extends","Component","properties","moveDir","default","v2","displayName","tooltip","_speedType","JoystickEnum","SpeedType","STOP","type","_moveSpeed","stopSpeed","Integer","normalSpeed","fastSpeed","onLoad","JoystickEvent","getInstance","on","JoystickEventType","TOUCH_START","onTouchStart","TOUCH_MOVE","onTouchMove","TOUCH_END","onTouchEnd","event","data","speedType","moveDistance","move","delat","mul","node","getComponent","RigidBody","linearVelocity","x","y","update","dt","NORMAL","FAST"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,gBAAY;;AAER;AACAC,iBAAS;AACLC,qBAASN,GAAGO,EAAH,CAAM,CAAN,EAAS,CAAT,CADJ;AAELC,yBAAa,UAFR;AAGLC,qBAAS;AAHJ,SAHD;AAQRC,oBAAY;AACRJ,qBAASK,uBAAaC,SAAb,CAAuBC,IADxB;AAERL,yBAAa,YAFL;AAGRM,kBAAMH,uBAAaC,SAHX;AAIRH,qBAAS;AAJD,SARJ;;AAeR;AACAM,oBAAY;AACRT,qBAAS,CADD;AAERE,yBAAa,YAFL;AAGRC,qBAAS;AAHD,SAhBJ;;AAsBRO,mBAAW;AACPV,qBAAS,CADF;AAEPQ,kBAAMd,GAAGiB,OAFF;AAGPR,qBAAS;AAHF,SAtBH;AA2BRS,qBAAa;AACTZ,qBAAS,GADA;AAETQ,kBAAMd,GAAGiB,OAFA;AAGTR,qBAAS;AAHA,SA3BL;AAgCRU,mBAAW;AACPb,qBAAS,GADF;AAEPQ,kBAAMd,GAAGiB,OAFF;AAGPR,qBAAS;AAHF;AAhCH,KAFP;;AAyCLW,UAzCK,oBAyCI;;AAELC,gCAAcC,WAAd,GAA4BC,EAA5B,CAA+BZ,uBAAaa,iBAAb,CAA+BC,WAA9D,EAA2E,KAAKC,YAAhF,EAA8F,IAA9F;AACAL,gCAAcC,WAAd,GAA4BC,EAA5B,CAA+BZ,uBAAaa,iBAAb,CAA+BG,UAA9D,EAA0E,KAAKC,WAA/E,EAA4F,IAA5F;AACAP,gCAAcC,WAAd,GAA4BC,EAA5B,CAA+BZ,uBAAaa,iBAAb,CAA+BK,SAA9D,EAAyE,KAAKC,UAA9E,EAA0F,IAA1F;AACH,KA9CI;AAgDLJ,gBAhDK,0BAgDU,CAEd,CAlDI;AAoDLE,eApDK,uBAoDOG,KApDP,EAoDcC,IApDd,EAoDoB;AACrB,aAAKtB,UAAL,GAAkBsB,KAAKC,SAAvB;AACA,aAAK5B,OAAL,GAAe2B,KAAKE,YAApB;AACH,KAvDI;AAyDLJ,cAzDK,sBAyDMC,KAzDN,EAyDaC,IAzDb,EAyDmB;AACpB,aAAKtB,UAAL,GAAkBsB,KAAKC,SAAvB;AAEH,KA5DI;;;AA8DL;AACAE,QA/DK,kBA+DE;AACV;AACA;AACA;AACO;AACA,YAAIC,QAAQ,KAAK/B,OAAL,CAAagC,GAAb,CAAiB,KAAKtB,UAAL,GAAkB,GAAnC,CAAZ;AACA,aAAKuB,IAAL,CAAUC,YAAV,CAAuBvC,GAAGwC,SAA1B,EAAqCC,cAArC,GAAsDzC,GAAGO,EAAH,CAAM6B,MAAMM,CAAN,GAAQ,GAAd,EAAkBN,MAAMO,CAAN,GAAQ,GAA1B,CAAtD;;AAEP;AACA;AAEI,KA1EI;AA8ELC,UA9EK,kBA8EEC,EA9EF,EA8EM;AACP,gBAAQ,KAAKnC,UAAb;AACI,iBAAKC,uBAAaC,SAAb,CAAuBC,IAA5B;AACI,qBAAKE,UAAL,GAAkB,KAAKC,SAAvB;AACA;AACJ,iBAAKL,uBAAaC,SAAb,CAAuBkC,MAA5B;AACI,qBAAK/B,UAAL,GAAkB,KAAKG,WAAvB;AACA;AACJ,iBAAKP,uBAAaC,SAAb,CAAuBmC,IAA5B;AACI,qBAAKhC,UAAL,GAAkB,KAAKI,SAAvB;AACA;AACJ;AACI;AAXR;AAaA,aAAKgB,IAAL;AACH;AA7FI,CAAT","file":"player.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\home\\player","sourcesContent":["import JoystickEnum from \"./../../helper/Joystick/JoystickEnum\";\nimport JoystickEvent from \"./../../helper/Joystick/JoystickEvent\";\nimport global from \"../../global/global\";\ncc.Class({\n    extends: cc.Component,\n    properties: {\n \n        // from joystick\n        moveDir: {\n            default: cc.v2(0, 1),\n            displayName: 'Move Dir',\n            tooltip: '移动方向',\n        },\n        _speedType: {\n            default: JoystickEnum.SpeedType.STOP,\n            displayName: 'Speed Type',\n            type: JoystickEnum.SpeedType,\n            tooltip: '速度级别'\n        },\n \n        // from self\n        _moveSpeed: {\n            default: 0,\n            displayName: 'Move Speed',\n            tooltip: '移动速度'\n        },\n \n        stopSpeed: {\n            default: 0,\n            type: cc.Integer,\n            tooltip: '停止时速度'\n        },\n        normalSpeed: {\n            default: 100,\n            type: cc.Integer,\n            tooltip: '正常速度'\n        },\n        fastSpeed: {\n            default: 200,\n            type: cc.Integer,\n            tooltip: '最快速度'\n        }, \n    },\n\n    onLoad() {\n        \n        JoystickEvent.getInstance().on(JoystickEnum.JoystickEventType.TOUCH_START, this.onTouchStart, this);\n        JoystickEvent.getInstance().on(JoystickEnum.JoystickEventType.TOUCH_MOVE, this.onTouchMove, this);\n        JoystickEvent.getInstance().on(JoystickEnum.JoystickEventType.TOUCH_END, this.onTouchEnd, this);\n    },\n \n    onTouchStart() {\n \n    },\n \n    onTouchMove(event, data) {\n        this._speedType = data.speedType;\n        this.moveDir = data.moveDistance;\n    },\n \n    onTouchEnd(event, data) {\n        this._speedType = data.speedType;\n        \n    },\n \n    // methods\n    move() {\n //       this.node.angle = cc.misc.radiansToDegrees(\n //           Math.atan2(this.moveDir.y, this.moveDir.x)\n //       ) - 90;\n        // cc.log(this.moveDir.mul(this._moveSpeed / 120));\n        var delat = this.moveDir.mul(this._moveSpeed / 120);\n        this.node.getComponent(cc.RigidBody).linearVelocity = cc.v2(delat.x*120,delat.y*120);\n\n //       let newPos = this.node.position.add(this.moveDir.mul(this._moveSpeed / 120));\n //       this.node.setPosition(newPos);\n        \n    },\n \n\n\n    update(dt) {\n        switch (this._speedType) {\n            case JoystickEnum.SpeedType.STOP:\n                this._moveSpeed = this.stopSpeed;\n                break;\n            case JoystickEnum.SpeedType.NORMAL:\n                this._moveSpeed = this.normalSpeed;\n                break;\n            case JoystickEnum.SpeedType.FAST:\n                this._moveSpeed = this.fastSpeed;\n                break;\n            default:\n                break;\n        }\n        this.move();\n    },\n});\n \n"]}