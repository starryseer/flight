{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\miniGame\\miniMain/assets\\script\\miniGame\\miniMain\\userInfo.js"],"names":["cc","Class","extends","Component","properties","nicknameLab","default","type","Label","tooltip","signatureLab","editFrame","Node","avatar","Sprite","headAtlas","SpriteAtlas","onLoad","init","node","on","systemEvent","updateUserInfo","onDestroy","off","string","global","clientAttrData","nickname","signature","loadAvatar","oldSize","width","spriteFrame","getSpriteFrame","imageConf","newSize","scale","onModifyClick","target","data","emit"],"mappings":";;;;;;AAAA;;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,qBAAa;AACTC,qBAAS,IADA;AAETC,kBAAMP,GAAGQ,KAFA;AAGTC,qBAAS;AAHA,SADL;AAMRC,sBAAc;AACVJ,qBAAS,IADC;AAEVC,kBAAMP,GAAGQ,KAFC;AAGVC,qBAAS;AAHC,SANN;AAWRE,mBAAW;AACPL,qBAAS,IADF;AAEPC,kBAAMP,GAAGY,IAFF;AAGPH,qBAAS;AAHF,SAXH;AAgBRI,gBAAO;AACHP,qBAAS,IADN;AAEHC,kBAAMP,GAAGc,MAFN;AAGHL,qBAAS;AAHN,SAhBC;AAqBRM,mBAAU;AACNT,qBAAS,IADH;AAENC,kBAAMP,GAAGgB,WAFH;AAGNP,qBAAS;AAHH;AArBF,KAHP;;AA+BL;;AAEAQ,UAjCK,oBAiCK;AACN,aAAKC,IAAL;AACA,aAAKC,IAAL,CAAUC,EAAV,CAAa,QAAb,EAAsB,KAAKF,IAA3B,EAAgC,IAAhC;AACAlB,WAAGqB,WAAH,CAAeD,EAAf,CAAkB,gBAAlB,EAAmC,KAAKE,cAAxC,EAAuD,IAAvD;AACH,KArCI;AAuCLC,aAvCK,uBAuCM;AACPvB,WAAGqB,WAAH,CAAeG,GAAf,CAAmB,gBAAnB,EAAoC,KAAKF,cAAzC,EAAwD,IAAxD;AACH,KAzCI;AA2CLJ,QA3CK,kBA4CL;AACI,aAAKb,WAAL,CAAiBoB,MAAjB,GAA0BC,iBAAOC,cAAP,CAAsBC,QAAtB,GAA+BF,iBAAOC,cAAP,CAAsBC,QAArD,GAA8D,EAAxF;AACA,aAAKlB,YAAL,CAAkBe,MAAlB,GAA2BC,iBAAOC,cAAP,CAAsBE,SAAtB,GAAgCH,iBAAOC,cAAP,CAAsBE,SAAtD,GAAgE,EAA3F;AACA,aAAKC,UAAL;AAEH,KAjDI;AAmDLA,cAnDK,wBAoDL;AACI,YAAIC,UAAU,KAAKlB,MAAL,CAAYM,IAAZ,CAAiBa,KAA/B;AACA,aAAKnB,MAAL,CAAYoB,WAAZ,GAA0B,KAAKlB,SAAL,CAAemB,cAAf,CAA8BR,iBAAOS,SAAP,CAAiBtB,MAAjB,CAAwBa,iBAAOC,cAAP,CAAsBd,MAA9C,CAA9B,CAA1B;AACA,YAAIuB,UAAU,KAAKvB,MAAL,CAAYM,IAAZ,CAAiBa,KAA/B;AACA,aAAKnB,MAAL,CAAYM,IAAZ,CAAiBkB,KAAjB,GAAyBN,UAAQK,OAAR,GAAgB,CAAzC;AACH,KAzDI;AA2DLd,kBA3DK,4BA4DL;AACI,aAAKjB,WAAL,CAAiBoB,MAAjB,GAA0BC,iBAAOC,cAAP,CAAsBC,QAAtB,GAA+BF,iBAAOC,cAAP,CAAsBC,QAArD,GAA8D,EAAxF;AACA,aAAKlB,YAAL,CAAkBe,MAAlB,GAA2BC,iBAAOC,cAAP,CAAsBE,SAAtB,GAAgCH,iBAAOC,cAAP,CAAsBE,SAAtD,GAAgE,EAA3F;AACA,aAAKC,UAAL;AACH,KAhEI;AAkELQ,iBAlEK,yBAkESC,MAlET,EAkEgBC,IAlEhB,EAmEL;AACI,aAAK7B,SAAL,CAAe8B,IAAf,CAAoB,MAApB,EAA2B,EAA3B;AACH;AArEI;;AAuEL;AAvEJ","file":"userInfo.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\miniGame\\miniMain","sourcesContent":["import global from \"./../../global/global\";\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        nicknameLab: {\r\n            default: null,\r\n            type: cc.Label,\r\n            tooltip: '昵称标签'\r\n        },\r\n        signatureLab: {\r\n            default: null,\r\n            type: cc.Label,\r\n            tooltip: '签名标签'\r\n        },\r\n        editFrame: {\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '签名标签'\r\n        },\r\n        avatar:{\r\n            default: null,\r\n            type: cc.Sprite,\r\n            tooltip: '头像'\r\n        },\r\n        headAtlas:{\r\n            default: null,\r\n            type: cc.SpriteAtlas,\r\n            tooltip: '头像plist'\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.init();       \r\n        this.node.on('update',this.init,this);\r\n        cc.systemEvent.on('updateUserInfo',this.updateUserInfo,this);\r\n    },\r\n\r\n    onDestroy(){\r\n        cc.systemEvent.off('updateUserInfo',this.updateUserInfo,this);\r\n    },\r\n\r\n    init()\r\n    {\r\n        this.nicknameLab.string = global.clientAttrData.nickname?global.clientAttrData.nickname:\"\";\r\n        this.signatureLab.string = global.clientAttrData.signature?global.clientAttrData.signature:\"\";\r\n        this.loadAvatar(); \r\n\r\n    },\r\n\r\n    loadAvatar()\r\n    {\r\n        let oldSize = this.avatar.node.width;\r\n        this.avatar.spriteFrame = this.headAtlas.getSpriteFrame(global.imageConf.avatar[global.clientAttrData.avatar]);\r\n        let newSize = this.avatar.node.width;\r\n        this.avatar.node.scale = oldSize/newSize/2;\r\n    },\r\n\r\n    updateUserInfo()\r\n    {\r\n        this.nicknameLab.string = global.clientAttrData.nickname?global.clientAttrData.nickname:\"\";\r\n        this.signatureLab.string = global.clientAttrData.signature?global.clientAttrData.signature:\"\";\r\n        this.loadAvatar();\r\n    },\r\n\r\n    onModifyClick(target,data)\r\n    {\r\n        this.editFrame.emit('show',{});\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}