{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\miniGame\\miniMain/assets\\script\\miniGame\\miniMain\\userInfo.js"],"names":["cc","Class","extends","Component","properties","nicknameLab","default","type","Label","tooltip","signatureLab","editFrame","Node","avatar","Sprite","onLoad","avatarUrl","global","imageConf","clientAttrData","loader","load","url","error","purl","console","log","oldSize","node","width","spriteFrame","SpriteFrame","newSize","scale","on","init","systemEvent","updateUserInfo","onDestroy","off","string","nickname","signature","onModifyClick","target","data","emit"],"mappings":"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","file":"userInfo.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\miniGame\\miniMain","sourcesContent":["import global from \"./../../global/global\";\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        nicknameLab: {\r\n            default: null,\r\n            type: cc.Label,\r\n            tooltip: '昵称标签'\r\n        },\r\n        signatureLab: {\r\n            default: null,\r\n            type: cc.Label,\r\n            tooltip: '签名标签'\r\n        },\r\n        editFrame: {\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '签名标签'\r\n        },\r\n        avatar:{\r\n            default: null,\r\n            type: cc.Sprite,\r\n            tooltip: '头像'\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        var avatarUrl = global.imageConf.avatar[global.clientAttrData.avatar];\r\n        cc.loader.load({ url:avatarUrl, type: 'png' }, (error, purl) => {\r\n            if(error){\r\n                console.log(error);\r\n                return;\r\n            }\r\n            let oldSize = this.avatar.node.width;\r\n            this.avatar.spriteFrame = new cc.SpriteFrame(purl)\r\n            let newSize = this.avatar.node.width;\r\n            this.avatar.node.scale = oldSize/newSize/2;\r\n        });\r\n        this.node.on('update',this.init,this);\r\n        cc.systemEvent.on('updateUserInfo',this.updateUserInfo,this);\r\n    },\r\n\r\n    onDestroy(){\r\n        cc.systemEvent.off('updateUserInfo',this.updateUserInfo,this);\r\n    },\r\n\r\n    init()\r\n    {\r\n        this.nicknameLab.string = global.clientAttrData.nickname?global.clientAttrData.nickname:\"\";\r\n        this.signatureLab.string = global.clientAttrData.signature?global.clientAttrData.signature:\"\";\r\n\r\n    },\r\n\r\n    updateUserInfo()\r\n    {\r\n        this.nicknameLab.string = global.clientAttrData.nickname?global.clientAttrData.nickname:\"\";\r\n        this.signatureLab.string = global.clientAttrData.signature?global.clientAttrData.signature:\"\";\r\n        var avatarUrl = global.imageConf.avatar[global.clientAttrData.avatar];\r\n        cc.loader.load({ url:avatarUrl, type: 'png' }, (error, purl) => {\r\n            if(error){\r\n                console.log(error);\r\n                return;\r\n            }\r\n            let oldSize = this.avatar.node.width;\r\n            this.avatar.spriteFrame = new cc.SpriteFrame(purl)\r\n            let newSize = this.avatar.node.width;\r\n            this.avatar.node.scale = oldSize/newSize/2;\r\n        });\r\n    },\r\n\r\n    onModifyClick(target,data)\r\n    {\r\n        this.editFrame.emit('show',{});\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}