{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\script\\miniGame\\miniMain\\prefab/assets\\script\\miniGame\\miniMain\\prefab\\avatar.js"],"names":["cc","Class","extends","Component","properties","avatar","default","type","Sprite","tooltip","chosen","Node","headAtlas","SpriteAtlas","tag","Integer","onLoad","node","on","init","systemEvent","avatarChosen","onDestroy","off","start","isChosen","loadAvatar","oldSize","width","spriteFrame","getSpriteFrame","global","imageConf","newSize","scale","clientAttrData","active","onButtonClick","target","data","emit"],"mappings":";;;;;;AAAA;;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAO;AACHC,qBAAS,IADN;AAEHC,kBAAMP,GAAGQ,MAFN;AAGHC,qBAAS;AAHN,SADC;AAMRC,gBAAO;AACHJ,qBAAS,IADN;AAEHC,kBAAMP,GAAGW,IAFN;AAGHF,qBAAS;AAHN,SANC;AAWRG,mBAAU;AACNN,qBAAS,IADH;AAENC,kBAAMP,GAAGa,WAFH;AAGNJ,qBAAS;AAHH,SAXF;AAgBRK,aAAI;AACAR,qBAAS,CAAC,CADV;AAEAC,kBAAMP,GAAGe,OAFT;AAGAN,qBAAS;AAHT;AAhBI,KAHP;;AA0BL;;AAEAO,UA5BK,oBA4BK;AACN,aAAKC,IAAL,CAAUC,EAAV,CAAa,MAAb,EAAoB,KAAKC,IAAzB,EAA8B,IAA9B;AACAnB,WAAGoB,WAAH,CAAeF,EAAf,CAAkB,cAAlB,EAAiC,KAAKG,YAAtC,EAAmD,IAAnD;AACH,KA/BI;AAiCLC,aAjCK,uBAiCM;AACPtB,WAAGoB,WAAH,CAAeG,GAAf,CAAmB,cAAnB,EAAkC,KAAKF,YAAvC,EAAoD,IAApD;AACH,KAnCI;AAqCLG,SArCK,mBAqCI,CAER,CAvCI;AAyCLL,QAzCK,gBAyCAL,GAzCA,EAyCI;AACL,aAAKA,GAAL,GAAWA,GAAX;AACA,aAAKW,QAAL;AACA,aAAKC,UAAL,CAAgBZ,GAAhB;AACH,KA7CI;AA+CLY,cA/CK,sBA+CMZ,GA/CN,EAgDL;AACI,YAAIa,UAAU,KAAKtB,MAAL,CAAYY,IAAZ,CAAiBW,KAA/B;AACA,aAAKvB,MAAL,CAAYwB,WAAZ,GAA0B,KAAKjB,SAAL,CAAekB,cAAf,CAA8BC,iBAAOC,SAAP,CAAiB3B,MAAjB,CAAwBS,GAAxB,CAA9B,CAA1B;AACA,YAAImB,UAAU,KAAK5B,MAAL,CAAYY,IAAZ,CAAiBW,KAA/B;AACA,aAAKvB,MAAL,CAAYY,IAAZ,CAAiBiB,KAAjB,GAAyBP,UAAQM,OAAR,GAAgB,CAAzC;AACH,KArDI;AAuDLR,YAvDK,sBAwDL;AACI,YAAG,KAAKX,GAAL,IAAYiB,iBAAOI,cAAP,CAAsB9B,MAArC,EACA;AACI,iBAAKK,MAAL,CAAY0B,MAAZ,GAAqB,IAArB;AACH,SAHD,MAKI,KAAK1B,MAAL,CAAY0B,MAAZ,GAAqB,KAArB;AAEP,KAhEI;AAkELC,iBAlEK,yBAkESC,MAlET,EAkEgBC,IAlEhB,EAkEqB;AACtBvC,WAAGoB,WAAH,CAAeoB,IAAf,CAAoB,cAApB,EAAmC,KAAK1B,GAAxC;AACH,KApEI;AAsELO,gBAtEK,wBAsEQkB,IAtER,EAuEL;AACI,YAAGA,QAAQ,KAAKzB,GAAhB,EACA;AACI,iBAAKJ,MAAL,CAAY0B,MAAZ,GAAqB,IAArB;AACH,SAHD,MAKI,KAAK1B,MAAL,CAAY0B,MAAZ,GAAqB,KAArB;AACP;;AAED;;AAhFK,CAAT","file":"avatar.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\miniGame\\miniMain\\prefab","sourcesContent":["import global from './../../../global/global'\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        avatar:{\r\n            default: null,\r\n            type: cc.Sprite,\r\n            tooltip: '头像'\r\n        },\r\n        chosen:{\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '被选中'\r\n        },\r\n        headAtlas:{\r\n            default: null,\r\n            type: cc.SpriteAtlas,\r\n            tooltip: '头像plist'\r\n        },\r\n        tag:{\r\n            default: -1,\r\n            type: cc.Integer,\r\n            tooltip: '标签'\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.node.on('init',this.init,this);\r\n        cc.systemEvent.on('avatarChosen',this.avatarChosen,this);\r\n    },\r\n\r\n    onDestroy(){\r\n        cc.systemEvent.off('avatarChosen',this.avatarChosen,this);\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    init(tag){\r\n        this.tag = tag;\r\n        this.isChosen();\r\n        this.loadAvatar(tag);  \r\n    },\r\n\r\n    loadAvatar(tag)\r\n    {\r\n        let oldSize = this.avatar.node.width;\r\n        this.avatar.spriteFrame = this.headAtlas.getSpriteFrame(global.imageConf.avatar[tag]);\r\n        let newSize = this.avatar.node.width;\r\n        this.avatar.node.scale = oldSize/newSize/2;\r\n    },\r\n\r\n    isChosen()\r\n    {\r\n        if(this.tag == global.clientAttrData.avatar)\r\n        {\r\n            this.chosen.active = true;\r\n        }\r\n        else\r\n            this.chosen.active = false;\r\n    \r\n    },\r\n\r\n    onButtonClick(target,data){\r\n        cc.systemEvent.emit('avatarChosen',this.tag);\r\n    },\r\n\r\n    avatarChosen(data)\r\n    {\r\n        if(data == this.tag)\r\n        {\r\n            this.chosen.active = true;\r\n        }\r\n        else\r\n            this.chosen.active = false;\r\n    }\r\n\r\n    // update (dt) {},\r\n});\r\n"]}