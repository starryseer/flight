{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\miniGame\\miniMain/assets\\script\\miniGame\\miniMain\\rankFrame.js"],"names":["cc","Class","extends","Component","properties","bg","default","type","Node","tooltip","rankInfoPrefab","Prefab","rankLayout","myRank","onLoad","global","FitHelper","onEnable","node","fitFun","init","systemEvent","on","show","onDestroy","off","fade","param","userId","userData","id","token","gameId","HttpHelper","httpPost","urlConf","mini_rank","rsp","code","removeAllChildren","rankList","data","rank","rankInfo","instantiate","parseInt","point","nickname","addChild","emit","clientAttrData","setPosition","v2","onCloseClick"],"mappings":";;;;;;AAAA;;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,YAAI;AACAC,qBAAS,IADT;AAEAC,kBAAMP,GAAGQ,IAFT;AAGAC,qBAAS;AAHT,SADI;AAMRC,wBAAe;AACXJ,qBAAS,IADE;AAEXC,kBAAMP,GAAGW,MAFE;AAGXF,qBAAS;AAHE,SANP;AAWRG,oBAAW;AACPN,qBAAS,IADF;AAEPC,kBAAMP,GAAGQ,IAFF;AAGPC,qBAAS;AAHF,SAXH;AAgBRI,gBAAO;AACHP,qBAAS,IADN;AAEHC,kBAAMP,GAAGQ,IAFN;AAGHC,qBAAS;AAHN;AAhBC,KAHP;;AA0BL;;AAEAK,UA5BK,oBA4BK;AACNC,yBAAOC,SAAP,CAAiBC,QAAjB,CAA0B,KAAKC,IAA/B;AACAH,yBAAOC,SAAP,CAAiBG,MAAjB,CAAwB,KAAKd,EAA7B;AACA,aAAKe,IAAL;AACApB,WAAGqB,WAAH,CAAeC,EAAf,CAAkB,eAAlB,EAAkC,KAAKC,IAAvC,EAA4C,IAA5C;AACH,KAjCI;AAmCLC,aAnCK,uBAmCM;AACPxB,WAAGqB,WAAH,CAAeI,GAAf,CAAmB,eAAnB,EAAmC,KAAKF,IAAxC,EAA6C,IAA7C;AACH,KArCI;AAuCLH,QAvCK,kBAuCC;AACF,aAAKM,IAAL;AACH,KAzCI;AA2CLH,QA3CK,kBA2CC;AAAA;;AAEF,YAAII,QAAQ;AACRC,oBAAOb,iBAAOc,QAAP,CAAgBC,EADf;AAERC,mBAAMhB,iBAAOc,QAAP,CAAgBE,KAFd;AAGRC,oBAAO;AAHC,SAAZ;AAKAjB,yBAAOkB,UAAP,CAAkBC,QAAlB,CAA2BnB,iBAAOoB,OAAP,CAAeC,SAA1C,EAAoDT,KAApD,EAA0D,UAACU,GAAD,EAAO;AAC7D,gBAAGA,IAAIC,IAAJ,IAAY,GAAf,EACA;AACI,sBAAK1B,UAAL,CAAgB2B,iBAAhB;AACA,oBAAIC,WAAWH,IAAII,IAAJ,CAASD,QAAxB;AACA,qBAAI,IAAIE,IAAR,IAAgBF,QAAhB,EACA;AACI,wBAAIG,WAAW3C,GAAG4C,WAAH,CAAe,MAAKlC,cAApB,CAAf;AACA,wBAAIiB,QAAQ;AACRe,8BAAKG,SAASH,IAAT,IAAe,CADZ;AAERI,+BAAMN,SAASE,IAAT,EAAe,OAAf,CAFE;AAGRK,kCAASP,SAASE,IAAT,EAAe,UAAf;AAHD,qBAAZ;AAKA,0BAAK9B,UAAL,CAAgBoC,QAAhB,CAAyBL,QAAzB;AACAA,6BAASM,IAAT,CAAc,MAAd,EAAqBtB,KAArB;AACH;AACD,oBAAIgB,WAAW3C,GAAG4C,WAAH,CAAe,MAAKlC,cAApB,CAAf;AACA,oBAAIiB,QAAQ;AACRe,0BAAKL,IAAII,IAAJ,CAASC,IADN;AAERI,2BAAMT,IAAII,IAAJ,CAASK,KAFP;AAGRC,8BAAShC,iBAAOmC,cAAP,CAAsBH;AAHvB,iBAAZ;AAKA,sBAAKlC,MAAL,CAAYmC,QAAZ,CAAqBL,QAArB;AACAA,yBAASM,IAAT,CAAc,MAAd,EAAqBtB,KAArB;AACH;AACJ,SAzBD;AA0BA,aAAKT,IAAL,CAAUiC,WAAV,CAAsBnD,GAAGoD,EAAH,CAAM,CAAN,EAAQ,CAAR,CAAtB;AACH,KA7EI;AA+EL1B,QA/EK,kBA+EC;AACF;AACA,aAAKR,IAAL,CAAUiC,WAAV,CAAsBnD,GAAGoD,EAAH,CAAM,IAAN,EAAW,CAAX,CAAtB;AACH,KAlFI;AAoFLC,gBApFK,0BAoFS;AACV,aAAK3B,IAAL;AACH;AAtFI;;AA2FL;AA3FJ","file":"rankFrame.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\miniGame\\miniMain","sourcesContent":["import global from \"./../../global/global\";\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        bg: {\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '背景'\r\n        },\r\n        rankInfoPrefab:{\r\n            default: null,\r\n            type: cc.Prefab,\r\n            tooltip: '排名信息预制体'\r\n        },\r\n        rankLayout:{\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '排名栏'\r\n        },\r\n        myRank:{\r\n            default: null,\r\n            type: cc.Node,\r\n            tooltip: '我的排名'\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        global.FitHelper.onEnable(this.node);\r\n        global.FitHelper.fitFun(this.bg);\r\n        this.init();\r\n        cc.systemEvent.on('rankFrameShow',this.show,this);\r\n    },\r\n\r\n    onDestroy(){\r\n        cc.systemEvent.off('rankFrameShow',this.show,this);\r\n    },\r\n\r\n    init(){\r\n        this.fade();\r\n    },\r\n\r\n    show(){\r\n\r\n        var param = {\r\n            userId:global.userData.id,\r\n            token:global.userData.token,\r\n            gameId:1\r\n        };\r\n        global.HttpHelper.httpPost(global.urlConf.mini_rank,param,(rsp)=>{\r\n            if(rsp.code == 200)\r\n            {\r\n                this.rankLayout.removeAllChildren();\r\n                var rankList = rsp.data.rankList;\r\n                for(var rank in rankList)\r\n                {\r\n                    var rankInfo = cc.instantiate(this.rankInfoPrefab);\r\n                    var param = {\r\n                        rank:parseInt(rank)+1,\r\n                        point:rankList[rank]['point'],\r\n                        nickname:rankList[rank]['nickname']\r\n                    };\r\n                    this.rankLayout.addChild(rankInfo);\r\n                    rankInfo.emit('init',param);\r\n                }\r\n                var rankInfo = cc.instantiate(this.rankInfoPrefab);\r\n                var param = {\r\n                    rank:rsp.data.rank,\r\n                    point:rsp.data.point,\r\n                    nickname:global.clientAttrData.nickname\r\n                };\r\n                this.myRank.addChild(rankInfo);\r\n                rankInfo.emit('init',param);\r\n            }\r\n        });\r\n        this.node.setPosition(cc.v2(0,0));\r\n    },\r\n\r\n    fade(){\r\n        //global.FitHelper.onDisable();\r\n        this.node.setPosition(cc.v2(1200,0));\r\n    },\r\n\r\n    onCloseClick(){\r\n        this.fade();\r\n    },\r\n\r\n   \r\n\r\n\r\n    // update (dt) {},\r\n});\r\n"]}